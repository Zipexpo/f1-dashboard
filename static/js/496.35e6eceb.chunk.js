"use strict";(self.webpackChunkapp_perform_dashboard=self.webpackChunkapp_perform_dashboard||[]).push([[496],{5496:function(e,n,t){t.r(n),t.d(n,{default:function(){return k}});var a=t(4165),r=t(5861),i=t(3433),l=t(9439),o=t(2791),s=t(9071),c=t(1889),u=t(7621),f=t(4554),d=t(890),p=t(9218),m=t(6151),x=t(1923),h=t(4187),g=t(3400),v=t(1557),b=(t(4906),t(184)),Z=function(e){var n=e.data,t=e.onSelectRow,a=e.onUpload,r=e.omit,i=void 0===r?[]:r,s=(0,o.useMemo)((function(){if(n[0]){var e=[];return Object.keys(n[0]).filter((function(e){return!i.find((function(n){return n===e}))})).forEach((function(n){e.push({accessorKey:n,header:n})})),e}return[]}),[n,i]),c=(0,o.useRef)(null),u=(0,o.useState)(!1),d=(0,l.Z)(u,2),p=d[0],m=(d[1],(0,o.useState)([])),x=(0,l.Z)(m,2),Z=x[0],j=x[1],w=(0,o.useState)({}),P=(0,l.Z)(w,2),k=P[0],y=P[1];(0,o.useEffect)((function(){}),[n]),(0,o.useEffect)((function(){var e;null===(e=c.current)||void 0===e||e.scrollToIndex(0)}),[Z]);var S=(0,o.useCallback)((function(){return n.filter((function(e,n){return k[n]}))}),[k]);return(0,b.jsx)(h.ZP,{columns:s,data:n,enableGlobalFilterModes:!0,selectAllMode:"all",muiTableContainerProps:{sx:{maxHeight:"100%"}},initialState:{density:"compact"},onSortingChange:j,state:{isLoading:p,sorting:Z,rowSelection:k},enableRowSelection:!0,onRowSelectionChange:y,muiTableBodyRowProps:function(e){var n=e.row;return{onClick:function(){t(n.original)},sx:{cursor:"pointer"}}},enableColumnResizing:!0,defaultColumn:{minSize:50,maxSize:9001,size:220},renderTopToolbarCustomActions:function(e){e.table;return(0,b.jsx)(f.Z,{sx:{display:"flex",gap:"1rem"},children:a&&Object.keys(k).length?(0,b.jsxs)(g.Z,{onClick:function(){return a(S())},size:"small",children:[" Use selected data",(0,b.jsx)(v.Z,{})]}):""})},renderToolbarInternalActions:function(e){var n=e.table;return(0,b.jsxs)(f.Z,{children:[(0,b.jsx)(h.Qn,{table:n}),(0,b.jsx)(h.kx,{table:n}),(0,b.jsx)(h.UN,{table:n}),(0,b.jsx)(h._c,{table:n})]})},positionToolbarAlertBanner:"bottom"})};var j=function(e){var n=e.multiple,t=e.children,a=e.buttonRef,r=e.handleFile,i=void 0===r?function(){}:r,s=o.useState(!1),c=(0,l.Z)(s,2),u=c[0],f=c[1],d=o.useRef(null),p=function(e){e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?f(!0):"dragleave"===e.type&&f(!1)};return(0,o.useEffect)((function(){a.current&&(a.current.onclick=function(){d.current.click()})}),[a.current]),(0,b.jsxs)("form",{className:"form-file-upload",onDragEnter:p,onSubmit:function(e){return e.preventDefault()},style:{margin:"auto"},children:[(0,b.jsx)("input",{ref:d,type:"file",className:"input-file-upload",multiple:n,onChange:function(e){e.preventDefault(),e.target.files&&e.target.files[0]&&i(e.target.files)}}),(0,b.jsx)("label",{htmlFor:"input-file-upload",className:"label-file-upload ".concat(u?"drag-active":""),children:(0,b.jsx)("div",{children:t})}),u&&(0,b.jsx)("div",{className:"drag-file-element",onDragEnter:p,onDragLeave:p,onDragOver:p,onDrop:function(e){e.preventDefault(),e.stopPropagation(),f(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&i(e.dataTransfer.files)}})]})},w=t(5739),P=t(9434),k=function(){var e=(0,P.I0)(),n=(0,o.useRef)(null),t=(0,o.useState)([]),h=(0,l.Z)(t,2),g=h[0],v=h[1],k=(0,o.useState)("MI100-profile-<AppName>-<Profile>-\\S+"),y=(0,l.Z)(k,2),S=y[0],C=y[1],R=(0,o.useTransition)(),T=(0,l.Z)(R,2),A=(T[0],T[1]),D=function(e){try{var n=new RegExp(e.replace(/<Profile>|<AppName>/g,"<(.*?)>")),t=new RegExp(e.replace(/<Profile>|<AppName>/g,"(.*?)")),a=[e.replace(n,"$1"),e.replace(n,"$2")];a[0]&&a[1]&&(g.forEach((function(e){var n=e["File name"];e[a[0]]=n.replace(t,"$1"),e[a[1]]=n.replace(t,"$2")})),v((0,i.Z)(g)))}catch(r){}};return(0,b.jsx)(j,{buttonRef:n,multiple:!0,handleFile:function(e){A((0,r.Z)((0,a.Z)().mark((function n(){var t,r,l;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t=[],r=(0,a.Z)().mark((function n(r){var l;return(0,a.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:l=e[r],g[r]={"File name":l.name,"# rows":0,Profile:null,AppName:null,isLoading:!0,data:[]},v((0,i.Z)(g)),t.push(new Promise((function(e,n){try{var t=new FileReader;t.readAsText(new Blob([l],{type:l.type})),t.onloadend=function(n){g[r].isLoading=!1,g[r].data=(0,s.ueB)(n.target.result),g[r]["# rows"]=g[r].data.length,v((0,i.Z)(g)),e(!0)}}catch(a){g[r].isLoading=!1,g[r].data=[],v((0,i.Z)(g)),e(!1)}})));case 4:case"end":return n.stop()}}),n)})),l=0;case 3:if(!(l<e.length)){n.next=8;break}return n.delegateYield(r(l),"t0",5);case 5:l++,n.next=3;break;case 8:return n.prev=8,n.next=11,Promise.all(t);case 11:D(S),n.next=17;break;case 14:n.prev=14,n.t1=n.catch(8),console.log(n.t1);case 17:case"end":return n.stop()}}),n,null,[[8,14]])}))))},children:(0,b.jsxs)(c.ZP,{container:!0,spacing:x.dv,children:[(0,b.jsx)(c.ZP,{item:!0,xs:12,children:(0,b.jsx)(u.Z,{children:(0,b.jsx)(f.Z,{sx:{p:2,pl:2},children:(0,b.jsxs)(c.ZP,{container:!0,direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,children:[(0,b.jsx)(c.ZP,{item:!0,children:(0,b.jsxs)(d.Z,{variant:"h2",children:[g.length," files"]})}),(0,b.jsx)(c.ZP,{item:!0,children:(0,b.jsx)(p.Z,{size:"small",label:"App-Profile-pattern",value:S,onChange:function(e){var n=e.target.value;C(n),D(n)}})}),(0,b.jsx)(c.ZP,{item:!0,children:(0,b.jsx)(m.Z,{ref:n,variant:"contained",children:"Upload files"})})]})})})}),(0,b.jsx)(c.ZP,{item:!0,xs:12,children:(0,b.jsx)(Z,{data:g,omit:["data","isLoading"],onUpload:function(n){e((0,w.FT)({files:n}))}})})]})})}}}]);
//# sourceMappingURL=496.35e6eceb.chunk.js.map