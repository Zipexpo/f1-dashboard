{"version":3,"file":"static/js/943.199c2500.chunk.js","mappings":"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","sources":["components/viz/lineChart/index.js","views/viz/index.js"],"sourcesContent":["import Plot from 'react-plotly.js';\r\n\r\nimport {useEffect, useState} from \"react\";\r\n\r\nconst initData=[];\r\nconst layout={title:{text:'',pad:0},margin:{t:10,l:50,b:20,r:10}}\r\nconst LineChart = ({data=initData,xKey,yKey,mode='makers'})=>{\r\n    const [plotdata,setPlotdata] = useState(initData);\r\n    useEffect(()=>{\r\n        const x=[];\r\n        const y=[];\r\n        data.forEach(d=>{\r\n            x.push(d[xKey]);\r\n            y.push(d[yKey]);\r\n        })\r\n        setPlotdata({\r\n            x,\r\n            y,\r\n        })\r\n    },[xKey,yKey,data])\r\n    // console.log(JSON.stringify(spec.data.values))\r\n    return (<Plot data={[{\r\n        x:plotdata.x,\r\n        y:plotdata.y,\r\n        type: 'scatter',\r\n        mode,\r\n        // marker: {color: 'red'},\r\n    }]} style={{width: '100%',height:'100%'}} layout={layout} useResizeHandler={true}/>)\r\n}\r\n\r\nexport default LineChart","import {useSelector} from \"react-redux\";\r\nimport {\r\n    selectDatas\r\n} from \"../../store/actions/dataProcess\";\r\nimport {gridSpacing} from \"../../store/constant\";\r\nimport {Card, Grid, Typography, Box, Autocomplete, TextField, Stack, MenuItem} from \"@mui/material\";\r\nimport {useEffect, useState} from \"react\";\r\nimport {groups} from \"d3\";\r\nimport LineChart from \"../../components/viz/lineChart\";\r\n\r\n// fix this later\r\nconst Viz = ()=>{\r\n    const datas = useSelector(selectDatas);\r\n    const [nestData,stNestData] = useState([]);\r\n    const [dimension,setDimension] = useState([]);\r\n    const [plotType,setPlotType] = useState('lines');\r\n    const [layout,setLayout] = useState([]);\r\n    const [axis,setAxis] = useState([{label:'x',key:\"index\"},\r\n        {label:'y',key:\"voltage\"},\r\n        {label:'color',key:\"junction_temperature\"}]);\r\n        // {key:\"gpu_usage\"}]);\r\n    // need to move this in the future\r\n    useEffect(()=>{\r\n        const newProfile = groups(datas,d=>d.Profile);\r\n        const positionK = {};\r\n        const newdata = newProfile.map(([p,pd])=>{\r\n            const app = Object.keys(positionK).map(k=>[k,[]]);\r\n            pd.forEach(d=>{\r\n                if (positionK[d.AppName]===undefined){\r\n                    positionK[d.AppName] = app.length;\r\n                    app[positionK[d.AppName]]=[d.AppName,[]];\r\n                }\r\n                app[positionK[d.AppName]][1].push(d);\r\n            })\r\n            return [p,app]\r\n        })\r\n        stNestData(newdata);\r\n        if (datas[0]&&datas[0].data&&datas[0].data[0]) {\r\n            setDimension(Object.keys(datas[0].data[0]))\r\n        }else\r\n            setDimension([])\r\n    },[datas]);\r\n    const onChangeAxis = (key,value)=>{\r\n        axis[key].key = value;\r\n        setAxis([...axis])\r\n    }\r\n    return(\r\n        <Grid container spacing={gridSpacing}>\r\n            <Grid item xs={12} >\r\n                <Stack spacing={2} direction={\"row\"}>\r\n                    <TextField\r\n                        select\r\n                        label=\"Plot type\"\r\n                        size=\"small\"\r\n                        sx={{minWidth:200}}\r\n                        value={plotType}\r\n                        onChange={(event)=>setPlotType(event.target.value)}\r\n                    >\r\n                        <MenuItem value={'markers'}>\r\n                            Scatter plot\r\n                        </MenuItem>\r\n                        <MenuItem value={'lines'}>\r\n                            Line chart\r\n                        </MenuItem>\r\n                    </TextField>\r\n                {axis.map((a,i)=><Autocomplete value={a.key} key={a.label}\r\n                                               size={\"small\"}\r\n                                               sx={{minWidth:200}}\r\n                               options={dimension}\r\n                               onChange={(event, newValue) => onChangeAxis(i, newValue)}\r\n                               renderInput={(params) => <TextField {...params} label={a.label}/>}/>)}\r\n                </Stack>\r\n            </Grid>\r\n            {\r\n                nestData.map(([profile,pData])=>(<Grid item key={profile} xs={12} >\r\n                    <Card>\r\n                        <Box sx={{ p: 2, pl: 2 }}>\r\n                            <Typography variant={'h3'}>{profile}</Typography>\r\n                            <Grid container>\r\n                                {pData.map(([app,appData])=><Grid key={`${profile} ${app}`} item xs={4} sx={{height:200,mb:3}}>\r\n                                    <Typography variant={'h5'} textAlign={'center'}>{app}</Typography>\r\n                                    {appData[0]&&<LineChart data={appData[0]?.data} xKey={axis[0].key} yKey={axis[1].key}\r\n                                                mode={plotType}/>}\r\n                                    </Grid>)}\r\n\r\n                            </Grid>\r\n                        </Box>\r\n                    </Card>\r\n                </Grid>))\r\n            }\r\n        </Grid>\r\n    )\r\n}\r\n\r\nexport default Viz;"],"names":["initData","layout","title","text","pad","margin","t","l","b","r","data","xKey","yKey","mode","useState","plotdata","setPlotdata","useEffect","x","y","forEach","d","push","type","style","width","height","useResizeHandler","datas","useSelector","selectDatas","nestData","stNestData","dimension","setDimension","plotType","setPlotType","label","key","axis","setAxis","newProfile","groups","Profile","positionK","newdata","map","p","pd","app","Object","keys","k","undefined","AppName","length","Grid","container","spacing","gridSpacing","item","xs","Stack","direction","TextField","select","size","sx","minWidth","value","onChange","event","target","MenuItem","a","i","Autocomplete","options","newValue","renderInput","params","profile","pData","Card","Box","pl","Typography","variant","appData","mb","textAlign"],"sourceRoot":""}