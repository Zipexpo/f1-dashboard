"use strict";(self.webpackChunkapp_perform_dashboard=self.webpackChunkapp_perform_dashboard||[]).push([[105],{8105:function(e,n,t){t.r(n),t.d(n,{default:function(){return re}});var r=t(1413),a=t(3433),o=t(9439),i=t(9434),u=t(5739),c=t(1923),s=t(6846),l=t(9218),f=t(1889),d=t(890),m=t(3767),p=t(3786),h=t(388),v=t(7621),x=t(4554),y=t(2791),g=t(4873),Z=t(8286),b=t(763),j=t(184),k=[],w={title:{text:"",pad:0},margin:{t:10,l:50,b:30,r:30}},S=function(e){var n,t,a=e.data,i=void 0===a?k:a,u=e.xKey,c=e.domain,s=e.yKey,l=e.cKey,f=e.multiple,d=e.getName,m=e.colorDomain,p=void 0===m?c:m,h=e.mode,v=void 0===h?"line":h,x=e.showscale,g=(0,y.useTransition)(),S=(0,o.Z)(g,2),E=(S[0],S[1]),K=(0,y.useState)(k),z=(0,o.Z)(K,2),M=z[0],P=z[1],H=(0,y.useState)([]),N=(0,o.Z)(H,2),A=N[0],R=N[1];(0,y.useEffect)((function(){E((function(){if(f){var e=function e(n,t){return n.data?t(n.data):!(!n[1]||!(0,b.isArray)(n[1]))&&n[1].forEach((function(n){return e(n,t)}))},n=[];i.forEach((function(t){e(t,(function(e){var r=[],a=[];e.forEach((function(e){r.push(e[u]),a.push(e[s])})),n.push({name:d(t),x:r,y:a,fill:"tozerox",type:"scatter",legendgroup:d(t)})}))})),P(n)}else{var t=[],r=[];i.forEach((function(e){t.push(e[u]),r.push(e[s])})),P([{name:d(i),x:t,y:r,type:"scatter"}])}}))}),[u,s,i,f]),(0,y.useEffect)((function(){R("markers"===v&&l?[i.map((function(e){return e[l]}))]:[[]])}),[i,l,v]),M.forEach((function(e){return e.mode=v})),A.length&&M.forEach((function(e,n){return e.marker={color:A[n],colorscale:"Portland",colorbarTitleText:l,colorbarThickness:5,showscale:x,cmin:p[0],cmax:p[1]}}));var _=(0,r.Z)((0,r.Z)({},w),{},{yaxis:{title:"<b>".concat(null!==(n=c[s].label)&&void 0!==n?n:s,"</b>"),autorange:!1,range:c[s]},xaxis:{title:"<b>".concat(null!==(t=c[u].label)&&void 0!==t?t:u,"</b>")}});return(0,j.jsx)(Z.Z,{data:M,style:{width:"100%",height:"100%"},layout:_,useResizeHandler:!0})},E=[],K={title:{text:"",pad:0},margin:{t:10,l:50,b:30,r:30}},z=function(e){var n,t,a=e.data,i=void 0===a?E:a,u=e.getArr,c=e.getName,s=e.xKey,l=e.yKey,f=e.domain,d=(e.mode,e.showscale,(0,y.useTransition)()),m=(0,o.Z)(d,2),p=(m[0],m[1]),h=(0,y.useState)(E),v=(0,o.Z)(h,2),x=v[0],b=v[1],k=(0,y.useState)([]),w=(0,o.Z)(k,2);w[0],w[1];(0,y.useEffect)((function(){p((function(){var e=i.map((function(e){var n=[],t=[];return u(e).forEach((function(e){n.push(e[s]),t.push(e[l])})),{name:c(e),x:n,y:t,type:"scatter"}}));b(e)}))}),[s,l,i]);var S=(0,r.Z)((0,r.Z)({},K),{},{yaxis:{title:"<b>".concat(null!==(n=f[l].label)&&void 0!==n?n:l,"</b>"),autoscale:!1,range:(0,g.BYU)().domain([f[l][0],1.01*f[l][1]]).nice().domain()},xaxis:{title:"<b>".concat(null!==(t=f[s].label)&&void 0!==t?t:s,"</b>")}});return(0,j.jsx)(Z.Z,{data:x,style:{width:"100%",height:"100%"},layout:S,useResizeHandler:!0})},M=[],P={title:{text:"",pad:0},margin:{t:10,l:50,b:30,r:30}},H=function(e){var n,t,a=e.data,i=void 0===a?M:a,u=e.xKey,c=e.domain,s=e.yKey,l=e.getName,f=e.combile,d=(0,y.useTransition)(),m=(0,o.Z)(d,2),p=(m[0],m[1]),h=(0,y.useState)(M),v=(0,o.Z)(h,2),x=v[0],b=v[1];(0,y.useEffect)((function(){p((function(){var e=(0,g.PKp)().range(g.Cn1),n=[];if(f){var t=(0,g.$_Y)("#656565");t.opacity=.3;var r="Overall",a={x:[],y:[],name:r,legendgroup:r,type:"scatter",showlegend:!1,fill:"tonexty",fillcolor:t+"",mode:"line",line:{color:"transparent"}};t.opacity=1;var o={x:[],y:[],name:r,legendgroup:r,type:"scatter",mode:"line",line:{color:t+"",width:2}},c=(0,g.Fp7)(i,(function(e){return(0,g.Fp7)(e[1],(function(e){return e.data.length}))})),d=(0,g.w6H)(0,c).map((function(){return[]})),m=(0,g.w6H)(0,c).map((function(){return[]}));n.push(a),n.push(o),i.forEach((function(t){var r=l(t),a={x:[],y:[],name:r,type:"scatter",mode:"line",line:{color:e(r),width:2}};if(t[1]){for(var o=(0,g.Fp7)(t[1],(function(e){return e.data.length})),i=function(e){var n=[],r=t[1].map((function(t){var r=void 0;return void 0!==t.data[e]&&(r=t.data[e][s],n.push(t.data[e][u]),d[e].push(t.data[e][u])),m[e].push(r),r})),o=(0,g.J69)(r),i=(0,g.J69)(n);a.x.push(i),a.y.push(o)},c=0;c<o;c++)i(c);n.push(a)}}));for(var p=0;p<c;p++){var h=(0,g.VV$)(m[p]),v=(0,g.Fp7)(m[p]),x=(0,g.J69)(m[p]),y=(0,g.J69)(d[p]);o.x[p]=y,o.y[p]=x,a.x[p]=y,a.y[p]=v,a.x[2*c-1-p]=y,a.y[2*c-1-p]=h}console.log(a.x)}else i.forEach((function(t){var r=l(t),a=(0,g.$_Y)(e(r));a.opacity=.5;var o={x:[],y:[],name:r,legendgroup:r,type:"scatter",showlegend:!1,fill:"tozerox",fillcolor:a+"",mode:"line",line:{color:"transparent"}};a.opacity=1;var i=[],c={x:[],y:[],name:r,legendgroup:r,type:"scatter",mode:"line",line:{color:a+"",width:1}};if(t[1]){for(var f=(0,g.Fp7)(t[1],(function(e){return e.data.length})),d=function(e){var n=(0,g.VV$)(t[1],(function(n){return void 0!==n.data[e]?n.data[e][s]:void 0})),r=(0,g.Fp7)(t[1],(function(n){return void 0!==n.data[e]?n.data[e][s]:void 0})),a=(0,g.J69)(t[1],(function(n){return void 0!==n.data[e]?n.data[e][s]:void 0})),l=(0,g.J69)(t[1],(function(n){return void 0!==n.data[e]?n.data[e][u]:void 0}));o.x.push(l),o.y.push(r),i.push(n),c.x.push(l),c.y.push(a)},m=0;m<f;m++)d(m);for(var p=f-1;p>-1;p--)o.x.push(o.x[p]),o.y.push(i[p]);n.push(o),n.push(c)}}));b(n)}))}),[u,s,i]);var k=(0,r.Z)((0,r.Z)({},P),{},{yaxis:{title:"<b>".concat(null!==(n=c[s].label)&&void 0!==n?n:s,"</b>"),autorange:!1,range:c[s]},xaxis:{title:"<b>".concat(null!==(t=c[u].label)&&void 0!==t?t:u,"</b>")}});return(0,j.jsx)(Z.Z,{data:x,style:{width:"100%",height:"100%"},layout:k,useResizeHandler:!0})},N=[],A={title:{text:"",pad:0},margin:{t:10,l:50,b:20,r:10}},R=function(e){var n=e.data,t=void 0===n?N:n,a=e.getArr,i=e.getName,u=e.xKey,c=e.yKey,s=e.zKey,l=(e.mode,(0,y.useState)(N)),f=(0,o.Z)(l,2),d=f[0],m=f[1];(0,y.useEffect)((function(){var e=t.map((function(e){var n=[],t=[],r=[];return a(e).forEach((function(e){n.push(e[u]),t.push(e[c]),r.push(e[s])})),{name:i(e),x:n,y:t,z:r}}));m(e)}),[u,c,s,t]);var p=(0,y.useMemo)((function(){return d.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{type:"scatter3d",colorscale:"Portland",mode:"markers",marker:{size:3}})}))}),[d]);return(0,j.jsx)(Z.Z,{data:p,style:{width:"100%",height:"100%"},layout:(0,r.Z)((0,r.Z)({},A),{},{scene:{xaxis:{title:{text:u}},yaxis:{title:{text:c}},zaxis:{title:{text:s}}}}),useResizeHandler:!0})},_=[],C={title:{text:"",pad:0},margin:{t:10,l:50,b:50,r:10},hovermode:"closest",dragmode:"select",plot_bgcolor:"rgba(240,240,240, 0.95)",grid:{roworder:"bottom to top"}},V=function(e){var n=e.data,t=void 0===n?_:n,a=e.getArr,i=e.getName,u=e.dimensionKeys,c=(e.mode,(0,y.useState)(_)),s=(0,o.Z)(c,2),l=s[0],f=s[1],d=(0,y.useState)(C),m=(0,o.Z)(d,2),p=m[0],h=m[1];(0,y.useEffect)((function(){var e=t.map((function(e){var n=u.map((function(e){return{label:e,values:[]}}));return a(e).forEach((function(e){n.forEach((function(n){n.values.push(e[n.label])}))})),{type:"splom",name:i(e),dimensions:n,marker:{size:5,line:{color:"white",width:.5}}}}));f(e)}),[u,t]),(0,y.useEffect)((function(){var e=(0,r.Z)({},C);u.forEach((function(n,t){e["xaxis".concat(t)]=v(),e["yaxis".concat(t)]=v()})),h(e)}),[u]);var v=function(){return{showline:!1,zeroline:!1,gridcolor:"#ffff",ticklen:4}};return(0,j.jsx)(Z.Z,{data:l,style:{width:"100%",height:"100%"},layout:p,useResizeHandler:!0})},$=function(){function e(e){return n(e).map((function(n){return g.Smz(n)/e.length}))}function n(e){return g.w6H(e[0].length).map((function(n){return e.map((function(e){return e[n]}))}))}function t(e,t){return e.map((function(e){return n(t).map((function(n){return g.Smz(g.$Re(e,n).map((function(e){return e[0]*e[1]})))}))}))}function r(e,n){return g.w6H(e).map((function(e){return g.w6H(n).map((function(){return 0}))}))}function a(e,n){return console.assert(e.length===n.length,"dim(x) == dim(y)"),g.$Re(e,n).map((function(e){return"number"===typeof e[0]?e[0]-e[1]:g.$Re(e[0],e[1]).map((function(e){return e[0]-e[1]}))}))}this.scale=function(n,t,r){if(t){var o=e(n);n=n.map((function(e){return a(e,o)}))}if(r){var i=function(n){e(n);return t=e(function(e,n){return g.$Re(e,n).map((function(e){return"number"===typeof e[0]?e[0]*e[1]:g.$Re(e[0],e[1]).map((function(e){return e[0]*e[1]}))}))}(n,n)),t.map((function(e){return Math.sqrt(e)}));var t}(n);n=n.map((function(e){return n=e,t=i,console.assert(n.length===t.length,"dim(x) == dim(y)"),g.$Re(n,t).map((function(e){return 0!==e[1]?e[0]/e[1]:0}));var n,t}))}return n},this.pca=function(e,n){var o=function(e){var n,t=Math.pow(2,-52),a=1e-64/t,o=50,i=0,u=0,c=0,s=0,l=0,f=e.map((function(e){return e.slice(0)})),d=f.length,m=f[0].length;console.assert(d>=m,"Need more rows than columns");var p=g.w6H(m).map((function(){return 0})),h=g.w6H(m).map((function(){return 0})),v=r(m,m);function x(e,n){return(e=Math.abs(e))>(n=Math.abs(n))?e*Math.sqrt(1+n*n/e/e):0===n?e:n*Math.sqrt(1+e*e/n/n)}var y=0,Z=0,b=0,j=0,k=0,w=0,S=0;for(u=0;u<m;u++){for(p[u]=Z,S=0,l=u+1,c=u;c<d;c++)S+=f[c][u]*f[c][u];if(S<=a)Z=0;else for(y=f[u][u],Z=Math.sqrt(S),y>=0&&(Z=-Z),b=y*Z-S,f[u][u]=y-Z,c=l;c<m;c++){for(S=0,s=u;s<d;s++)S+=f[s][u]*f[s][c];for(y=S/b,s=u;s<d;s++)f[s][c]+=y*f[s][u]}for(h[u]=Z,S=0,c=l;c<m;c++)S+=f[u][c]*f[u][c];if(S<=a)Z=0;else{for(y=f[u][u+1],Z=Math.sqrt(S),y>=0&&(Z=-Z),b=y*Z-S,f[u][u+1]=y-Z,c=l;c<m;c++)p[c]=f[u][c]/b;for(c=l;c<d;c++){for(S=0,s=l;s<m;s++)S+=f[c][s]*f[u][s];for(s=l;s<m;s++)f[c][s]+=S*p[s]}}(k=Math.abs(h[u])+Math.abs(p[u]))>j&&(j=k)}for(u=m-1;-1!==u;u+=-1){if(0!==Z){for(b=Z*f[u][u+1],c=l;c<m;c++)v[c][u]=f[u][c]/b;for(c=l;c<m;c++){for(S=0,s=l;s<m;s++)S+=f[u][s]*v[s][c];for(s=l;s<m;s++)v[s][c]+=S*v[s][u]}}for(c=l;c<m;c++)v[u][c]=0,v[c][u]=0;v[u][u]=1,Z=p[u],l=u}for(u=m-1;-1!==u;u+=-1){for(l=u+1,Z=h[u],c=l;c<m;c++)f[u][c]=0;if(0!==Z){for(b=f[u][u]*Z,c=l;c<m;c++){for(S=0,s=l;s<d;s++)S+=f[s][u]*f[s][c];for(y=S/b,s=u;s<d;s++)f[s][c]+=y*f[s][u]}for(c=u;c<d;c++)f[c][u]=f[c][u]/Z}else for(c=u;c<d;c++)f[c][u]=0;f[u][u]+=1}for(t*=j,s=m-1;-1!==s;s+=-1)for(var E=0;E<o;E++){var K=!1;for(l=s;-1!==l;l+=-1){if(Math.abs(p[l])<=t){K=!0;break}if(Math.abs(h[l-1])<=t)break}if(!K){i=0,S=1;var z=l-1;for(u=l;u<s+1&&(y=S*p[u],p[u]=i*p[u],!(Math.abs(y)<=t));u++)for(b=x(y,Z=h[u]),h[u]=b,i=Z/b,S=-y/b,c=0;c<d;c++)k=f[c][z],w=f[c][u],f[c][z]=k*i+w*S,f[c][u]=-k*S+w*i}if(w=h[s],l===s){if(w<0)for(h[s]=-w,c=0;c<m;c++)v[c][s]=-v[c][s];break}for(console.assert(E<o-1,"Error: no convergence."),j=h[l],Z=x(y=(((k=h[s-1])-w)*(k+w)+((Z=p[s-1])-(b=p[s]))*(Z+b))/(2*b*k),1),y=y<0?((j-w)*(j+w)+b*(k/(y-Z)-b))/j:((j-w)*(j+w)+b*(k/(y+Z)-b))/j,i=1,S=1,u=l+1;u<s+1;u++){for(Z=p[u],k=h[u],b=S*Z,Z*=i,w=x(y,b),p[u-1]=w,y=j*(i=y/w)+Z*(S=b/w),Z=-j*S+Z*i,b=k*S,k*=i,c=0;c<m;c++)j=v[c][u-1],w=v[c][u],v[c][u-1]=j*i+w*S,v[c][u]=-j*S+w*i;for(w=x(y,b),h[u-1]=w,y=(i=y/w)*Z+(S=b/w)*k,j=-S*Z+i*k,c=0;c<d;c++)k=f[c][u-1],w=f[c][u],f[c][u-1]=k*i+w*S,f[c][u]=-k*S+w*i}p[l]=0,p[s]=y,h[s]=j}for(u=0;u<h.length;u++)h[u]<t&&(h[u]=0);for(u=0;u<m;u++)for(c=u-1;c>=0;c--)if(h[c]<h[u]){for(i=h[c],h[c]=h[u],h[u]=i,s=0;s<f.length;s++)n=f[s][u],f[s][u]=f[s][c],f[s][c]=n;for(s=0;s<v.length;s++)n=v[s][u],v[s][u]=v[s][c],v[s][c]=n;u=c}return{U:f,S:h,V:v}}(e),i=o.U,u=function(e){return g.w6H(e.length).map((function(n){return g.w6H(e.length).map((function(t){return n===t?e[n]:0}))}))}(o.S),c=o.V,s=t(e,c),l=t(i,u),f=function(e,n){return e.map((function(e){return e.map((function(e){return e<n?0:e}))}))}(a(s,l),1e-12),d=r(f.length,f[0].length);console.assert(function(e,n){return g.$Re(e,n).map((function(e){return g.$Re(e[0],e[1]).map((function(e){return e[0]===e[1]}))})).map((function(e){return e.reduce((function(e,n){return e*n}))})).reduce((function(e,n){return e*n}))}(f,d),"svd and eig ways must be the same.");for(var m=[],p=0;p<n;p++)m.push(p);for(var h in o.S)for(p=0;p<n;p++)if(o.S[h]>=o.S[m[p]]){m[p]=parseInt(h);break}return[l,c,m,u]}},F=[],T={title:{text:"",pad:0},margin:{t:10,l:50,b:50,r:10}},q=2,U=function(e){var n=e.data,t=void 0===n?F:n,a=e.getArr,i=e.getName,u=e.dimensionKeys,c=(e.mode,(0,y.useState)(F)),s=(0,o.Z)(c,2),l=s[0],f=s[1],d=(0,y.useState)(T),m=(0,o.Z)(d,2),p=m[0],h=m[1],v=(0,y.useTransition)(),x=(0,o.Z)(v,2),b=(x[0],x[1]);return(0,y.useEffect)((function(){b((function(){try{var e=[],n=[];t.forEach((function(t,r){n[r]=[],a(t).forEach((function(t){var a=u.map((function(e){return+t[e]}));n[r].push(e.length),e.push(a)}))}));var c=function(e,n){var t=new $,r=t.scale(e,!0,!0),a=t.pca(r,q),i=a[0],u=a[1],c=a[2],s=a[3];console.log(u);var l=e.map((function(e,n){var t=(0,g.w6H)(0,q).map((function(e){return i[n][c[e]]}));return t.data=e,t})),f=(0,g.Wem)(l,(function(e){return e[0]})),d=(0,g.Wem)(l,(function(e){return e[1]})),m=[0,0],p=[[0,-1/0],[0,-1/0]],h=n.map((function(e,n){var t=[m,(0,g.w6H)(0,q).map((function(e){return u[n][c[e]]}))];return p.forEach((function(e,r){var a=(0,o.Z)(e,2),i=(a[0],a[1]),u=Math.abs(t[1][r]-t[0][r]);u>i&&(p[r]=[n,u])})),t.name=e,t}));h[p[0][0]].pc1=!0,h[p[1][0]].pc2=!0;var v=Math.sqrt((0,g.Fp7)([W(m,[f[0],d[0]]),W(m,[f[0],d[1]]),W(m,[f[1],d[0]]),W(m,[f[1],d[1]])])/(0,g.Fp7)(h,(function(e){return W(m,[e[1][0],e[1][1]])})));h.forEach((function(e){e[1][0]=e[1][0]*v,e[1][1]=e[1][1]*v}));var x=(0,g.Smz)(s,(function(e,n){return e[n]}));var y=(0,g.w6H)(0,q).map((function(e){return s[c[e]][c[e]]/x}));return{solution:l,feature:h,contribute:y}}(e,u),s=c.solution,l=c.feature,d=c.contribute,m=t.map((function(e,t){return{type:"scatters",mode:"markers",name:i(e),x:n[t].map((function(e){return s[e][0]})),y:n[t].map((function(e){return s[e][1]}))}}));f(m);var p=(0,r.Z)((0,r.Z)({},T),{},{xaxis:{title:{text:"PC1 (".concat(Math.round(1e3*d[0])/10,"%)")}},yaxis:{title:{text:"PC2 (".concat(Math.round(1e3*d[1])/10,"%)")}}});p.shapes=l.map((function(e){return{type:"line",x0:e[0][0],y0:e[0][1],x1:e[1][0],y1:e[1][1]}})),p.annotations=l.map((function(e){return{x:e[1][0],y:e[1][1],text:e.name,xanchor:"center",yanchor:"bottom",font:{color:e.pc1||e.pc2?"red":"unset"}}})),h(p)}catch(v){f([])}}))}),[u,t]),(0,j.jsx)(Z.Z,{data:l,style:{width:"100%",height:"100%"},layout:p,useResizeHandler:!0})};function W(e,n){return Math.sqrt((e[1]-n[1])*(e[1]-n[1])+(e[0]-n[0])*(e[0]-n[0]))}var J=[],L={title:{text:"",pad:0},margin:{t:10,l:50,b:50,r:10}},D=2,O=function(e){var n=e.data,t=void 0===n?J:n,a=e.getArr,i=e.getName,u=e.dimensionKeys,c=(e.mode,(0,y.useState)(J)),s=(0,o.Z)(c,2),l=s[0],f=s[1],d=(0,y.useState)(L),m=(0,o.Z)(d,2),p=m[0],h=m[1],v=(0,y.useTransition)(),x=(0,o.Z)(v,2),b=(x[0],x[1]);return(0,y.useEffect)((function(){b((function(){try{var e=t.map((function(e){return i(e)})),n=(0,g.VV$)(t,(function(e){return a(e).length})),c=[];t.forEach((function(e,t){for(var r=a(e),o=function(){var e=r[i],n=u.map((function(n){return+e[n]}));c.push(n)},i=0;i<n;i++)o()}));var s=function(e,n,t,r){for(var a=new $,i=a.scale(e,!0,!0),u=[],c=function(e){for(var n=function(n){u[e*r+n]=t.map((function(t,a){return i[a*r+n][e]}))},a=0;a<r;a++)n(a)},s=0;s<n.length;s++)c(s);var l=a.pca(u,D),f=l[0],d=l[1],m=l[2],p=l[3];console.log(d);var h=u.map((function(e,n){return(0,g.w6H)(0,D).map((function(e){return f[n][m[e]]}))})),v=(0,g.Wem)(h,(function(e){return e[0]})),x=(0,g.Wem)(h,(function(e){return e[1]})),y=[0,0],Z=[[0,-1/0],[0,-1/0]],b=t.map((function(e,n){var t=[y,(0,g.w6H)(0,D).map((function(e){return d[n][m[e]]}))];return Z.forEach((function(e,r){var a=(0,o.Z)(e,2),i=(a[0],a[1]),u=Math.abs(t[1][r]-t[0][r]);u>i&&(Z[r]=[n,u])})),t.name=e,t}));b[Z[0][0]].pc1=!0,b[Z[1][0]].pc2=!0;var j=Math.sqrt((0,g.Fp7)([Y(y,[v[0],x[0]]),Y(y,[v[0],x[1]]),Y(y,[v[1],x[0]]),Y(y,[v[1],x[1]])])/(0,g.Fp7)(b,(function(e){return Y(y,[e[1][0],e[1][1]])})));b.forEach((function(e){e[1][0]=e[1][0]*j,e[1][1]=e[1][1]*j}));var k=(0,g.Smz)(p,(function(e,n){return e[n]}));var w=(0,g.w6H)(0,D).map((function(e){return p[m[e]][m[e]]/k}));return{solution:h,feature:b,contribute:w}}(c,u,e,n),l=s.solution,d=s.feature,m=s.contribute,p=(0,g.w6H)(0,n),v=u.map((function(e,t){return{type:"scatters",mode:"markers",name:e,x:p.map((function(e){return l[t*n+e][0]})),y:p.map((function(e){return l[t*n+e][1]}))}}));f(v);var x=(0,r.Z)((0,r.Z)({},L),{},{xaxis:{title:{text:"PC1 (".concat(Math.round(1e3*m[0])/10,"%)")}},yaxis:{title:{text:"PC2 (".concat(Math.round(1e3*m[1])/10,"%)")}}});x.shapes=d.map((function(e){return{type:"line",x0:e[0][0],y0:e[0][1],x1:e[1][0],y1:e[1][1]}})),x.annotations=d.map((function(e){return{x:e[1][0],y:e[1][1],text:e.name,xanchor:"center",yanchor:"bottom",font:{color:e.pc1||e.pc2?"red":"unset"}}})),h(x)}catch(y){f([])}}))}),[u,t]),(0,j.jsx)(Z.Z,{data:l,style:{width:"100%",height:"100%"},layout:p,useResizeHandler:!0})};function Y(e,n){return Math.sqrt((e[1]-n[1])*(e[1]-n[1])+(e[0]-n[0])*(e[0]-n[0]))}var B=[],I={title:{text:"",pad:0},margin:{t:10,r:10},xaxis:{ticks:"",tickfont:{size:8}},yaxis:{ticks:"",ticksuffix:" ",tickfont:{size:8}}},G=function(e){var n=e.data,t=void 0===n?B:n,a=e.getArr,i=e.getName,u=e.dimensionKey,c=(0,y.useState)(B),s=(0,o.Z)(c,2),l=s[0],f=s[1],d=(0,y.useState)(I),m=(0,o.Z)(d,2),p=m[0],h=m[1],v=(0,y.useTransition)(),x=(0,o.Z)(v,2),g=(x[0],x[1]);return(0,y.useEffect)((function(){g((function(){try{var e=[],n=t.map((function(n,t){return e.push(i(n)),a(n).map((function(e){return+e[u]}))})),o=[],c=e.map((function(n){return e.map((function(e){return null}))}));c[e.length-1][e.length-1]=1;for(var s=0;s<e.length-1;s++){c[s][s]=1;for(var l=s+1;l<e.length;l++){var d=n[s].length<n[l].length?X(n[s],n[l]):X(n[l],n[s]);c[s][l]=Math.abs(d),c[l][s]=c[s][l],c[s][l],o.push({xref:"x1",yref:"y1",x:e[l],y:e[s],text:Math.round(100*d)/100,font:{color:"white"},showarrow:!1})}}f([{type:"heatmap",name:u,x:e,y:e,z:c,zauto:!1,zmin:0,zmax:1,hoverongaps:!1,showscale:!1}]);var m=(0,r.Z)((0,r.Z)({},I),{},{annotations:o});h(m)}catch(p){f([])}}))}),[u,t]),(0,j.jsx)(Z.Z,{data:l,style:{width:"100%",height:"100%"},layout:p,useResizeHandler:!0})};function X(e,n){var t=Math.min,r=Math.pow,a=Math.sqrt,i=function(e,n){return e+n},u=t(e.length,n.length);if(0===u)return 0;var c=[e.slice(0,u),n.slice(0,u)],s=[e=c[0],n=c[1]].map((function(e){return e.reduce(i)})),l=(0,o.Z)(s,2),f=l[0],d=l[1],m=[e,n].map((function(e){return e.reduce((function(e,n){return e+r(n,2)}),0)})),p=(0,o.Z)(m,2),h=p[0],v=p[1],x=e.map((function(e,t){return e*n[t]})).reduce(i),y=a((h-r(f,2)/u)*(v-r(d,2)/u));return 0===y?0:(x-f*d/u)/y}var Q=[],ee={title:{text:"",pad:0},margin:{t:10,l:50,b:20,r:30},height:150,violinmode:"group",boxmode:"group"},ne=function(e){var n=e.data,t=void 0===n?Q:n,a=(e.getArr,e.getName),i=e.dimensionKeys,u=e.domain,c=e.mode,s=void 0===c?"violin":c,l=(0,y.useTransition)(),f=(0,o.Z)(l,2),d=(f[0],f[1]),m=(0,y.useState)(Q),p=(0,o.Z)(m,2),h=p[0],v=p[1],x=(0,y.useState)([]),b=(0,o.Z)(x,2),k=b[0],w=b[1];(0,y.useEffect)((function(){d((function(){var e=[],n={};i.forEach((function(e){n[e]=[]})),w([(0,g.VV$)(i,(function(e){return u[e][0]})),(0,g.Fp7)(i,(function(e){return u[e][1]}))]),t.map((function(t){var r=a(t);t[1].forEach((function(t){t.data.forEach((function(t){e.push(r),i.forEach((function(e,r){n[e].push(t[e])}))}))}))}));var r=i.map((function(t){return{type:s,x:e,y:n[t],legendgroup:t,scalegroup:t,name:t,points:"none",box:{visible:!0},meanline:{visible:!0}}}));v(r)}))}),[t,i,s]);var S=(0,r.Z)((0,r.Z)({},ee),{},{yaxis:{autoscale:!1,range:(0,g.BYU)().domain(k).nice()}});return console.log(k,(0,g.BYU)().domain(k).nice().domain()),(0,j.jsx)(Z.Z,{className:"violin_".concat(s),data:h,style:{width:"100%",height:"100%"},layout:S,useResizeHandler:!0})},te={power_usage:"Power Usage (W)",index:"Sample",voltage:"Voltage (mV)",edge_temperature:"Edge Temp ('C)",memory_temperature:"Mem Temp ('C)",juntion_temperature:"Junction Temp ('C)",sclk:"GPU Frequency (MHz)",gpu_usage:"GPU Usage (%)",memory_usage:"Mem Usage (%)"},re=function(){var e=(0,i.v9)(u.hp),n=(0,y.useState)(!1),t=(0,o.Z)(n,2),Z=t[0],b=t[1],k=(0,y.useState)([]),w=(0,o.Z)(k,2),E=w[0],K=w[1],M=(0,y.useState)([]),P=(0,o.Z)(M,2),N=P[0],A=P[1],_=(0,y.useState)({}),C=(0,o.Z)(_,2),$=C[0],F=C[1],T=(0,y.useState)("lines"),q=(0,o.Z)(T,2),W=q[0],J=q[1],L=(0,y.useState)([]),D=(0,o.Z)(L,2),Y=(D[0],D[1],(0,y.useState)([{label:"x",key:"index"},{label:"y",key:"voltage"},{label:"z",key:null,is3D:!0},{label:"color",key:null},{label:"dim",key:[],is3D:!0}])),B=(0,o.Z)(Y,2),I=B[0],X=B[1],Q=Z?"Profile":"AppName",ee=Z?"AppName":"Profile";(0,y.useEffect)((function(){var n=function(e,n){var t=(0,g.Xxj)(n,(function(e){return e[Q]})),r={},a=[],i=t.map((function(e){var n=(0,o.Z)(e,2),t=n[0],i=n[1],u=Object.keys(r).map((function(e){return[e,[]]}));return i.forEach((function(e){void 0===r[e[ee]]&&(r[e[ee]]=u.length,u[r[e[ee]]]=[e[ee],[]]),u[r[e[ee]]][1].push(e),a.push(e.data)})),[t,u]}));return K(i),{flatdata:a}}(0,e),t=n.flatdata,r={};if(e[0]&&e[0].data&&e[0].data[0]){var a=Object.keys(e[0].data[0]);a.forEach((function(e){r[e]=[1/0,-1/0];var n=t.map((function(n){return(0,g.Wem)(n,(function(n){return+n[e]}))}));r[e]=[(0,g.VV$)(n,(function(e){return e[0]})),(0,g.Fp7)(n,(function(e){return e[1]}))],te[e]&&(r[e].label=te[e])})),A(a)}else A([]);F(r)}),[Z,e]);var re=function(e,n){I[e].key=n,X((0,a.Z)(I))},ae="markers"===W||"lines2"===W||"violin"===W||"errorbar"===W||"errorbar2"===W||"lines"===W||"Splom"===W,oe=function(e){var n=(0,o.Z)(e,2),t=n[0],r=n[1];switch(W){case"markers":case"lines":return(0,j.jsx)(f.ZP,{container:!0,children:r.map((function(e,n){var r,a=(0,o.Z)(e,2),i=a[0],u=a[1];return(0,j.jsxs)(f.ZP,{item:!0,xs:4,sx:{height:200,mb:3,paddingTop:2},children:[(0,j.jsx)(d.Z,{variant:"h5",textAlign:"center",children:i}),u[0]&&(0,j.jsx)(S,{data:null===(r=u[0])||void 0===r?void 0:r.data,xKey:I[0].key,yKey:I[1].key,domain:$,cKey:I[3].key,colorDomain:$[I[3].key],getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},mode:W,showscale:2===n})]},"".concat(t," ").concat(i))}))});case"errorbar":return(0,j.jsx)(f.ZP,{container:!0,children:(0,j.jsx)(H,{data:r,xKey:I[0].key,yKey:I[1].key,domain:$,getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t}})});case"errorbar2":return(0,j.jsx)(f.ZP,{container:!0,children:(0,j.jsx)(H,{data:r,xKey:I[0].key,yKey:I[1].key,domain:$,getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},combile:!0})});case"lines2":return(0,j.jsx)(f.ZP,{container:!0,children:I[4].key.map((function(e){return(0,j.jsx)(f.ZP,{item:!0,xs:I[4].key.length>1?4:12,children:(0,j.jsx)(z,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,xKey:"index",yKey:e,domain:$})},e)}))});case"violin":return(0,j.jsx)(ne,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},domain:$,data:r,mode:"violin",dimensionKeys:I[4].key});case"boxplot":return(0,j.jsx)(ne,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},domain:$,data:r,mode:"box",dimensionKeys:I[4].key});case"Splom":return(0,j.jsx)(V,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,dimensionKeys:I[4].key});case"pca":return(0,j.jsx)(U,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,dimensionKeys:I[4].key});case"pca_2":return(0,j.jsx)(O,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,dimensionKeys:I[4].key});case"sim":return(0,j.jsx)(f.ZP,{container:!0,children:I[4].key.map((function(e){return(0,j.jsxs)(f.ZP,{item:!0,xs:I[4].key.length>1?6:12,sx:{height:200,mb:3},children:[(0,j.jsx)(d.Z,{variant:"h5",textAlign:"center",children:e}),(0,j.jsx)(G,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,dimensionKey:e})]},e)}))});case"Ribbon":return(0,j.jsx)(R,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,xKey:I[0].key,yKey:I[1].key,zKey:I[2].key,cKey:I[3].key});default:return(0,j.jsx)(j.Fragment,{children:"Not support yet"})}};return(0,j.jsxs)(f.ZP,{container:!0,spacing:c.dv,children:[(0,j.jsx)(f.ZP,{item:!0,xs:12,children:(0,j.jsxs)(m.Z,{spacing:2,direction:"row",children:[(0,j.jsxs)(l.Z,{select:!0,label:"Plot type",size:"small",sx:{minWidth:200},value:W,onChange:function(e){return J(e.target.value)},children:[(0,j.jsx)(p.Z,{value:"markers",children:"Scatter plot"}),(0,j.jsx)(p.Z,{value:"lines",children:"Line chart"}),(0,j.jsx)(p.Z,{value:"errorbar",children:"Line chart with bound"}),(0,j.jsx)(p.Z,{value:"errorbar2",children:"Line chart with bound 2"}),(0,j.jsx)(p.Z,{value:"lines2",children:"Line chart (combine)"}),(0,j.jsx)(p.Z,{value:"violin",children:"Violin chart (combine)"}),(0,j.jsx)(p.Z,{value:"boxplot",children:"Box plot (combine)"}),(0,j.jsx)(p.Z,{value:"Ribbon",children:"3D scatter plot"}),(0,j.jsx)(p.Z,{value:"Splom",children:"Splom"}),(0,j.jsx)(p.Z,{value:"pca",children:"PCA"}),(0,j.jsx)(p.Z,{value:"pca_2",children:"PCA 2"}),(0,j.jsx)(p.Z,{value:"sim",children:"Similarity matrix"})]}),(0,j.jsx)(h.Z,{value:"app_profile",selected:Z,color:"primary",onChange:function(){return b(!Z)},children:"Swap App and Profile"}),function(){switch(W){case"markers":case"errorbar":case"errorbar2":case"lines":return I.map((function(e,n){return(0,j.jsx)(s.Z,{value:e.key,getOptionLabel:function(e){return e},size:"small",sx:{minWidth:200,display:e.is3D?"none":void 0},options:N,onChange:function(e,t){return re(n,t)},renderInput:function(n){return(0,j.jsx)(l.Z,(0,r.Z)((0,r.Z)({},n),{},{label:e.label}))}},e.label)}));case"violin":case"boxplot":case"Splom":case"pca":case"pca_2":case"sim":case"lines2":return(0,j.jsx)(s.Z,{value:I[4].key,multiple:!0,getOptionLabel:function(e){return e},size:"small",options:N,onChange:function(e,n){return re(4,n)},renderInput:function(e){return(0,j.jsx)(l.Z,(0,r.Z)((0,r.Z)({},e),{},{label:I[4].label}))}});default:return I.map((function(e,n){return(0,j.jsx)(s.Z,{value:e.key,size:"small",getOptionLabel:function(e){return e},sx:{minWidth:200,display:"color"===e.label?"none":void 0},options:N,onChange:function(e,t){return re(n,t)},renderInput:function(n){return(0,j.jsx)(l.Z,(0,r.Z)((0,r.Z)({},n),{},{label:e.label}))}},e.label)}))}}()]})}),E.map((function(e){var n=(0,o.Z)(e,2),t=n[0],r=n[1];return(0,j.jsx)(f.ZP,{item:!0,xs:ae?12:6,children:(0,j.jsx)(v.Z,{children:(0,j.jsxs)(x.Z,{sx:{p:2,pl:2},children:[(0,j.jsx)(d.Z,{variant:"h4",sx:{textAlign:"center"},children:t}),oe([t,r])]})})},t)}))]})}}}]);
//# sourceMappingURL=105.d926a175.chunk.js.map