"use strict";(self.webpackChunkapp_perform_dashboard=self.webpackChunkapp_perform_dashboard||[]).push([[882],{8882:function(e,n,t){t.r(n),t.d(n,{default:function(){return q}});var r=t(1413),a=t(3433),o=t(9439),u=t(9434),i=t(5739),c=t(1923),s=t(6846),f=t(9218),l=t(1889),m=t(890),p=t(3767),h=t(3786),d=t(7621),v=t(4554),x=t(2791),y=t(8452),Z=(t(3791),t(8286)),g=t(184),b=[],k=[void 0,void 0],j={title:{text:"",pad:0},margin:{t:10,l:50,b:20,r:30}},w=function(e){var n=e.data,t=void 0===n?b:n,r=e.xKey,a=e.yKey,u=e.cKey,i=e.colorDomain,c=void 0===i?k:i,s=e.mode,f=void 0===s?"line":s,l=e.showscale,m=(0,x.useTransition)(),p=(0,o.Z)(m,2),h=(p[0],p[1]),d=(0,x.useState)(b),v=(0,o.Z)(d,2),y=v[0],w=v[1],S=(0,x.useState)([]),z=(0,o.Z)(S,2),E=z[0],M=z[1];(0,x.useEffect)((function(){h((function(){var e=[],n=[];t.forEach((function(t){e.push(t[r]),n.push(t[a])})),w({x:e,y:n})}))}),[r,a,t]),(0,x.useEffect)((function(){M("markers"===f&&u?t.map((function(e){return e[u]})):[])}),[t,u,f]);var K=[{x:y.x,y:y.y,type:"scatter",mode:f}];return console.log(c),E.length&&(K[0].marker={color:E,colorscale:"Portland",colorbarTitleText:u,colorbarThickness:5,showscale:l,cmin:c[0],cmax:c[1]}),(0,g.jsx)(Z.Z,{data:K,style:{width:"100%",height:"100%"},layout:j,useResizeHandler:!0})},S=[],z={title:{text:"",pad:0},margin:{t:10,l:50,b:20,r:10}},E=function(e){var n=e.data,t=void 0===n?S:n,a=e.getArr,u=e.getName,i=e.xKey,c=e.yKey,s=e.zKey,f=(e.mode,(0,x.useState)(S)),l=(0,o.Z)(f,2),m=l[0],p=l[1];(0,x.useEffect)((function(){var e=t.map((function(e){var n=[],t=[],r=[];return a(e).forEach((function(e){n.push(e[i]),t.push(e[c]),r.push(e[s])})),{name:u(e),x:n,y:t,z:r}}));p(e)}),[i,c,s,t]);var h=(0,x.useMemo)((function(){return m.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{type:"scatter3d",colorscale:"Portland",mode:"markers",marker:{size:3}})}))}),[m]);return(0,g.jsx)(Z.Z,{data:h,style:{width:"100%",height:"100%"},layout:(0,r.Z)((0,r.Z)({},z),{},{scene:{xaxis:{title:{text:i}},yaxis:{title:{text:c}},zaxis:{title:{text:s}}}}),useResizeHandler:!0})},M=[],K={title:{text:"",pad:0},margin:{t:10,l:50,b:50,r:10},hovermode:"closest",dragmode:"select",plot_bgcolor:"rgba(240,240,240, 0.95)",grid:{roworder:"bottom to top"}},A=function(e){var n=e.data,t=void 0===n?M:n,a=e.getArr,u=e.getName,i=e.dimensionKeys,c=(e.mode,(0,x.useState)(M)),s=(0,o.Z)(c,2),f=s[0],l=s[1],m=(0,x.useState)(K),p=(0,o.Z)(m,2),h=p[0],d=p[1];(0,x.useEffect)((function(){var e=t.map((function(e){var n=i.map((function(e){return{label:e,values:[]}}));return a(e).forEach((function(e){n.forEach((function(n){n.values.push(e[n.label])}))})),{type:"splom",name:u(e),dimensions:n,marker:{size:5,line:{color:"white",width:.5}}}}));l(e)}),[i,t]),(0,x.useEffect)((function(){var e=(0,r.Z)({},K);i.forEach((function(n,t){e["xaxis".concat(t)]=v(),e["yaxis".concat(t)]=v()})),d(e)}),[i]);var v=function(){return{showline:!1,zeroline:!1,gridcolor:"#ffff",ticklen:4}};return(0,g.jsx)(Z.Z,{data:f,style:{width:"100%",height:"100%"},layout:h,useResizeHandler:!0})},H=function(){function e(e){return n(e).map((function(n){return y.Smz(n)/e.length}))}function n(e){return y.w6H(e[0].length).map((function(n){return e.map((function(e){return e[n]}))}))}function t(e,t){return e.map((function(e){return n(t).map((function(n){return y.Smz(y.$Re(e,n).map((function(e){return e[0]*e[1]})))}))}))}function r(e,n){return y.w6H(e).map((function(e){return y.w6H(n).map((function(){return 0}))}))}function a(e,n){return console.assert(e.length===n.length,"dim(x) == dim(y)"),y.$Re(e,n).map((function(e){return"number"===typeof e[0]?e[0]-e[1]:y.$Re(e[0],e[1]).map((function(e){return e[0]-e[1]}))}))}this.scale=function(n,t,r){if(t){var o=e(n);n=n.map((function(e){return a(e,o)}))}if(r){var u=function(n){e(n);return t=e(function(e,n){return y.$Re(e,n).map((function(e){return"number"===typeof e[0]?e[0]*e[1]:y.$Re(e[0],e[1]).map((function(e){return e[0]*e[1]}))}))}(n,n)),t.map((function(e){return Math.sqrt(e)}));var t}(n);n=n.map((function(e){return n=e,t=u,console.assert(n.length===t.length,"dim(x) == dim(y)"),y.$Re(n,t).map((function(e){return 0!==e[1]?e[0]/e[1]:0}));var n,t}))}return n},this.pca=function(e,n){var o=function(e){var n,t=Math.pow(2,-52),a=1e-64/t,o=50,u=0,i=0,c=0,s=0,f=0,l=e.map((function(e){return e.slice(0)})),m=l.length,p=l[0].length;console.assert(m>=p,"Need more rows than columns");var h=y.w6H(p).map((function(){return 0})),d=y.w6H(p).map((function(){return 0})),v=r(p,p);function x(e,n){return(e=Math.abs(e))>(n=Math.abs(n))?e*Math.sqrt(1+n*n/e/e):0===n?e:n*Math.sqrt(1+e*e/n/n)}var Z=0,g=0,b=0,k=0,j=0,w=0,S=0;for(i=0;i<p;i++){for(h[i]=g,S=0,f=i+1,c=i;c<m;c++)S+=l[c][i]*l[c][i];if(S<=a)g=0;else for(Z=l[i][i],g=Math.sqrt(S),Z>=0&&(g=-g),b=Z*g-S,l[i][i]=Z-g,c=f;c<p;c++){for(S=0,s=i;s<m;s++)S+=l[s][i]*l[s][c];for(Z=S/b,s=i;s<m;s++)l[s][c]+=Z*l[s][i]}for(d[i]=g,S=0,c=f;c<p;c++)S+=l[i][c]*l[i][c];if(S<=a)g=0;else{for(Z=l[i][i+1],g=Math.sqrt(S),Z>=0&&(g=-g),b=Z*g-S,l[i][i+1]=Z-g,c=f;c<p;c++)h[c]=l[i][c]/b;for(c=f;c<m;c++){for(S=0,s=f;s<p;s++)S+=l[c][s]*l[i][s];for(s=f;s<p;s++)l[c][s]+=S*h[s]}}(j=Math.abs(d[i])+Math.abs(h[i]))>k&&(k=j)}for(i=p-1;-1!==i;i+=-1){if(0!==g){for(b=g*l[i][i+1],c=f;c<p;c++)v[c][i]=l[i][c]/b;for(c=f;c<p;c++){for(S=0,s=f;s<p;s++)S+=l[i][s]*v[s][c];for(s=f;s<p;s++)v[s][c]+=S*v[s][i]}}for(c=f;c<p;c++)v[i][c]=0,v[c][i]=0;v[i][i]=1,g=h[i],f=i}for(i=p-1;-1!==i;i+=-1){for(f=i+1,g=d[i],c=f;c<p;c++)l[i][c]=0;if(0!==g){for(b=l[i][i]*g,c=f;c<p;c++){for(S=0,s=f;s<m;s++)S+=l[s][i]*l[s][c];for(Z=S/b,s=i;s<m;s++)l[s][c]+=Z*l[s][i]}for(c=i;c<m;c++)l[c][i]=l[c][i]/g}else for(c=i;c<m;c++)l[c][i]=0;l[i][i]+=1}for(t*=k,s=p-1;-1!==s;s+=-1)for(var z=0;z<o;z++){var E=!1;for(f=s;-1!==f;f+=-1){if(Math.abs(h[f])<=t){E=!0;break}if(Math.abs(d[f-1])<=t)break}if(!E){u=0,S=1;var M=f-1;for(i=f;i<s+1&&(Z=S*h[i],h[i]=u*h[i],!(Math.abs(Z)<=t));i++)for(b=x(Z,g=d[i]),d[i]=b,u=g/b,S=-Z/b,c=0;c<m;c++)j=l[c][M],w=l[c][i],l[c][M]=j*u+w*S,l[c][i]=-j*S+w*u}if(w=d[s],f===s){if(w<0)for(d[s]=-w,c=0;c<p;c++)v[c][s]=-v[c][s];break}for(console.assert(z<o-1,"Error: no convergence."),k=d[f],g=x(Z=(((j=d[s-1])-w)*(j+w)+((g=h[s-1])-(b=h[s]))*(g+b))/(2*b*j),1),Z=Z<0?((k-w)*(k+w)+b*(j/(Z-g)-b))/k:((k-w)*(k+w)+b*(j/(Z+g)-b))/k,u=1,S=1,i=f+1;i<s+1;i++){for(g=h[i],j=d[i],b=S*g,g*=u,w=x(Z,b),h[i-1]=w,Z=k*(u=Z/w)+g*(S=b/w),g=-k*S+g*u,b=j*S,j*=u,c=0;c<p;c++)k=v[c][i-1],w=v[c][i],v[c][i-1]=k*u+w*S,v[c][i]=-k*S+w*u;for(w=x(Z,b),d[i-1]=w,Z=(u=Z/w)*g+(S=b/w)*j,k=-S*g+u*j,c=0;c<m;c++)j=l[c][i-1],w=l[c][i],l[c][i-1]=j*u+w*S,l[c][i]=-j*S+w*u}h[f]=0,h[s]=Z,d[s]=k}for(i=0;i<d.length;i++)d[i]<t&&(d[i]=0);for(i=0;i<p;i++)for(c=i-1;c>=0;c--)if(d[c]<d[i]){for(u=d[c],d[c]=d[i],d[i]=u,s=0;s<l.length;s++)n=l[s][i],l[s][i]=l[s][c],l[s][c]=n;for(s=0;s<v.length;s++)n=v[s][i],v[s][i]=v[s][c],v[s][c]=n;i=c}return{U:l,S:d,V:v}}(e),u=o.U,i=function(e){return y.w6H(e.length).map((function(n){return y.w6H(e.length).map((function(t){return n===t?e[n]:0}))}))}(o.S),c=o.V,s=t(e,c),f=t(u,i),l=function(e,n){return e.map((function(e){return e.map((function(e){return e<n?0:e}))}))}(a(s,f),1e-12),m=r(l.length,l[0].length);console.assert(function(e,n){return y.$Re(e,n).map((function(e){return y.$Re(e[0],e[1]).map((function(e){return e[0]===e[1]}))})).map((function(e){return e.reduce((function(e,n){return e*n}))})).reduce((function(e,n){return e*n}))}(l,m),"svd and eig ways must be the same.");for(var p=[],h=0;h<n;h++)p.push(h);for(var d in o.S)for(h=0;h<n;h++)if(o.S[d]>=o.S[p[h]]){p[h]=parseInt(d);break}return[f,c,p,i]}},N=[],R={title:{text:"",pad:0},margin:{t:10,l:50,b:50,r:10}},P=2,C=function(e){var n=e.data,t=void 0===n?N:n,a=e.getArr,u=e.getName,i=e.dimensionKeys,c=(e.mode,(0,x.useState)(N)),s=(0,o.Z)(c,2),f=s[0],l=s[1],m=(0,x.useState)(R),p=(0,o.Z)(m,2),h=p[0],d=p[1],v=(0,x.useTransition)(),b=(0,o.Z)(v,2),k=(b[0],b[1]);return(0,x.useEffect)((function(){k((function(){try{var e=[],n=[];t.forEach((function(t,r){n[r]=[],a(t).forEach((function(t){var a=i.map((function(e){return+t[e]}));n[r].push(e.length),e.push(a)}))}));var o=function(e,n){var t=new H,r=t.scale(e,!0,!0),a=t.pca(r,P),o=a[0],u=a[1],i=a[2],c=a[3];console.log(u);var s=e.map((function(e,n){var t=(0,y.w6H)(0,P).map((function(e){return o[n][i[e]]}));return t.data=e,t})),f=(0,y.Wem)(s,(function(e){return e[0]})),l=(0,y.Wem)(s,(function(e){return e[1]})),m=[0,0],p=n.map((function(e,n){var t=[m,(0,y.w6H)(0,P).map((function(e){return u[n][i[e]]}))];return t.name=e,t}));var h=Math.sqrt((0,y.Fp7)([$(m,[f[0],l[0]]),$(m,[f[0],l[1]]),$(m,[f[1],l[0]]),$(m,[f[1],l[1]])])/(0,y.Fp7)(p,(function(e){return $(m,[e[1][0],e[1][1]])})));p.forEach((function(e){e[1][0]=e[1][0]*h,e[1][1]=e[1][1]*h}));var d=(0,y.Smz)(c,(function(e,n){return e[n]}));var v=(0,y.w6H)(0,P).map((function(e){return c[i[e]][i[e]]/d}));return{solution:s,feature:p,contribute:v}}(e,i),c=o.solution,s=o.feature,f=o.contribute,m=t.map((function(e,t){return{type:"scatters",mode:"markers",name:u(e),x:n[t].map((function(e){return c[e][0]})),y:n[t].map((function(e){return c[e][1]}))}}));l(m);var p=(0,r.Z)((0,r.Z)({},R),{},{xaxis:{title:{text:"PC1 (".concat(Math.round(1e3*f[0])/10,"%)")}},yaxis:{title:{text:"PC2 (".concat(Math.round(1e3*f[1])/10,"%)")}}});p.shapes=s.map((function(e){return{type:"line",x0:e[0][0],y0:e[0][1],x1:e[1][0],y1:e[1][1]}})),p.annotations=s.map((function(e){return{x:e[1][0],y:e[1][1],text:e.name,xanchor:"center",yanchor:"bottom"}})),d(p)}catch(h){l([])}}))}),[i,t]),(0,g.jsx)(Z.Z,{data:f,style:{width:"100%",height:"100%"},layout:h,useResizeHandler:!0})};function $(e,n){return Math.sqrt((e[1]-n[1])*(e[1]-n[1])+(e[0]-n[0])*(e[0]-n[0]))}var q=function(){var e=(0,u.v9)(i.hp),n=(0,x.useState)([]),t=(0,o.Z)(n,2),Z=t[0],b=t[1],k=(0,x.useState)([]),j=(0,o.Z)(k,2),S=j[0],z=j[1],M=(0,x.useState)({}),K=(0,o.Z)(M,2),H=K[0],N=K[1],R=(0,x.useState)("lines"),P=(0,o.Z)(R,2),$=P[0],q=P[1],D=(0,x.useState)([]),W=(0,o.Z)(D,2),T=(W[0],W[1],(0,x.useState)([{label:"x",key:"index"},{label:"y",key:"voltage"},{label:"z",key:null,is3D:!0},{label:"color",key:null},{label:"dim",key:[],is3D:!0}])),_=(0,o.Z)(T,2),F=_[0],I=_[1];(0,x.useEffect)((function(){var n=(0,y.Xxj)(e,(function(e){return e.Profile})),t={},r=[],a=n.map((function(e){var n=(0,o.Z)(e,2),a=n[0],u=n[1],i=Object.keys(t).map((function(e){return[e,[]]}));return u.forEach((function(e){void 0===t[e.AppName]&&(t[e.AppName]=i.length,i[t[e.AppName]]=[e.AppName,[]]),i[t[e.AppName]][1].push(e),r.push(e.data)})),[a,i]}));b(a);var u={};if(e[0]&&e[0].data&&e[0].data[0]){var i=Object.keys(e[0].data[0]);i.forEach((function(e){u[e]=[1/0,-1/0];var n=r.map((function(n){return(0,y.Wem)(n,(function(n){return+n[e]}))}));u[e]=[(0,y.VV$)(n,(function(e){return e[0]})),(0,y.Fp7)(n,(function(e){return e[1]}))]})),z(i)}else z([]);N(u)}),[e]);var V=function(e,n){F[e].key=n,I((0,a.Z)(F))},O="markers"===$||"lines"===$||"Splom"===$,U=function(e){var n=(0,o.Z)(e,2),t=n[0],r=n[1];switch($){case"markers":case"lines":return(0,g.jsx)(l.ZP,{container:!0,children:r.map((function(e,n){var r,a=(0,o.Z)(e,2),u=a[0],i=a[1];return(0,g.jsxs)(l.ZP,{item:!0,xs:4,sx:{height:200,mb:3},children:[(0,g.jsx)(m.Z,{variant:"h5",textAlign:"center",children:u}),i[0]&&(0,g.jsx)(w,{data:null===(r=i[0])||void 0===r?void 0:r.data,xKey:F[0].key,yKey:F[1].key,cKey:F[3].key,colorDomain:H[F[3].key],getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},mode:$,showscale:2===n})]},"".concat(t," ").concat(u))}))});case"Splom":return(0,g.jsx)(A,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,dimensionKeys:F[4].key});case"pca":return(0,g.jsx)(C,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,dimensionKeys:F[4].key});case"Ribbon":return(0,g.jsx)(E,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,xKey:F[0].key,yKey:F[1].key,zKey:F[2].key,cKey:F[3].key});default:return(0,g.jsx)(g.Fragment,{children:"Not support yet"})}};return(0,g.jsxs)(l.ZP,{container:!0,spacing:c.dv,children:[(0,g.jsx)(l.ZP,{item:!0,xs:12,children:(0,g.jsxs)(p.Z,{spacing:2,direction:"row",children:[(0,g.jsxs)(f.Z,{select:!0,label:"Plot type",size:"small",sx:{minWidth:200},value:$,onChange:function(e){return q(e.target.value)},children:[(0,g.jsx)(h.Z,{value:"markers",children:"Scatter plot"}),(0,g.jsx)(h.Z,{value:"lines",children:"Line chart"}),(0,g.jsx)(h.Z,{value:"Ribbon",children:"3D scatter plot"}),(0,g.jsx)(h.Z,{value:"Splom",children:"Splom"}),(0,g.jsx)(h.Z,{value:"pca",children:"PCA"})]}),function(){switch($){case"markers":case"lines":return F.map((function(e,n){return(0,g.jsx)(s.Z,{value:e.key,size:"small",sx:{minWidth:200,display:e.is3D?"none":void 0},options:S,onChange:function(e,t){return V(n,t)},renderInput:function(n){return(0,g.jsx)(f.Z,(0,r.Z)((0,r.Z)({},n),{},{label:e.label}))}},e.label)}));case"Splom":case"pca":return(0,g.jsx)(s.Z,{value:F[4].key,multiple:!0,size:"small",options:S,onChange:function(e,n){return V(4,n)},renderInput:function(e){return(0,g.jsx)(f.Z,(0,r.Z)((0,r.Z)({},e),{},{label:F[4].label}))}});default:return F.map((function(e,n){return(0,g.jsx)(s.Z,{value:e.key,size:"small",sx:{minWidth:200,display:"color"===e.label?"none":void 0},options:S,onChange:function(e,t){return V(n,t)},renderInput:function(n){return(0,g.jsx)(f.Z,(0,r.Z)((0,r.Z)({},n),{},{label:e.label}))}},e.label)}))}}()]})}),Z.map((function(e){var n=(0,o.Z)(e,2),t=n[0],r=n[1];return(0,g.jsx)(l.ZP,{item:!0,xs:O?12:6,children:(0,g.jsx)(d.Z,{children:(0,g.jsxs)(v.Z,{sx:{p:2,pl:2},children:[(0,g.jsx)(m.Z,{variant:"h3",children:t}),U([t,r])]})})},t)}))]})}}}]);
//# sourceMappingURL=882.9b44b771.chunk.js.map