"use strict";(self.webpackChunkapp_perform_dashboard=self.webpackChunkapp_perform_dashboard||[]).push([[46],{1046:function(e,n,t){t.r(n),t.d(n,{default:function(){return ce}});var r=t(1413),a=t(3433),o=t(9439),i=t(9434),u=t(5739),c=t(1923),s=t(6846),l=t(9218),f=t(3786),d=t(5523),m=t(4454),h=t(1889),p=t(890),v=t(3767),x=t(388),g=t(7621),y=t(4554),Z=t(2791),b=t(4873),j=t(8286),k=t(763),w=t(184),E=[],S={title:{text:"",pad:0},margin:{t:10,l:50,b:30,r:30}},z=function(e){var n,t,a=e.data,i=void 0===a?E:a,u=e.xKey,c=e.domain,s=e.yKey,l=e.cKey,f=e.multiple,d=e.getName,m=e.colorDomain,h=void 0===m?c:m,p=e.mode,v=void 0===p?"line":p,x=e.showscale,g=(0,Z.useTransition)(),y=(0,o.Z)(g,2),b=(y[0],y[1]),z=(0,Z.useState)(E),K=(0,o.Z)(z,2),M=K[0],N=K[1],P=(0,Z.useState)([]),H=(0,o.Z)(P,2),A=H[0],R=H[1];(0,Z.useEffect)((function(){b((function(){if(f){var e=function e(n,t){return n.data?t(n.data):!(!n[1]||!(0,k.isArray)(n[1]))&&n[1].forEach((function(n){return e(n,t)}))},n=[];i.forEach((function(t){e(t,(function(e){var r=[],a=[];e.forEach((function(e){r.push(e[u]),a.push(e[s])})),n.push({name:d(t),x:r,y:a,fill:"tozerox",type:"scatter",legendgroup:d(t)})}))})),N(n)}else{var t=[],r=[];i.forEach((function(e){t.push(e[u]),r.push(e[s])})),N([{name:d(i),x:t,y:r,type:"scatter"}])}}))}),[u,s,i,f]),(0,Z.useEffect)((function(){R("markers"===v&&l?[i.map((function(e){return e[l]}))]:[[]])}),[i,l,v]),M.forEach((function(e){return e.mode=v})),A.length&&M.forEach((function(e,n){return e.marker={color:A[n],colorscale:"Portland",colorbarTitleText:l,colorbarThickness:5,showscale:x,cmin:h[0],cmax:h[1]}}));var C=(0,r.Z)((0,r.Z)({},S),{},{yaxis:{title:c[s]?"<b>".concat(null!==(n=c[s].label)&&void 0!==n?n:s,"</b>"):"",autorange:!1,range:c[s]},xaxis:{title:c[s]?"<b>".concat(null!==(t=c[u].label)&&void 0!==t?t:u,"</b>"):""}});return(0,w.jsx)(j.Z,{data:M,style:{width:"100%",height:"100%"},layout:C,useResizeHandler:!0})},K=[],M={title:{text:"",pad:0},margin:{t:10,l:50,b:30,r:30}},N=function(e){var n,t,a=e.data,i=void 0===a?K:a,u=e.getArr,c=e.getName,s=e.xKey,l=e.yKey,f=e.domain,d=(e.mode,e.showscale,(0,Z.useTransition)()),m=(0,o.Z)(d,2),h=(m[0],m[1]),p=(0,Z.useState)(K),v=(0,o.Z)(p,2),x=v[0],g=v[1],y=(0,Z.useState)([]),k=(0,o.Z)(y,2);k[0],k[1];(0,Z.useEffect)((function(){h((function(){var e=i.map((function(e){var n=[],t=[];return u(e).forEach((function(e){n.push(e[s]),t.push(e[l])})),{name:c(e),x:n,y:t,type:"scatter"}}));g(e)}))}),[s,l,i]);var E=(0,r.Z)((0,r.Z)({},M),{},{yaxis:{title:f[l]?"<b>".concat(null!==(n=f[l].label)&&void 0!==n?n:l,"</b>"):"",autoscale:!1,range:(0,b.BYU)().domain([f[l][0],1.01*f[l][1]]).nice().domain()},xaxis:{title:f[l]?"<b>".concat(null!==(t=f[s].label)&&void 0!==t?t:s,"</b>"):""}});return(0,w.jsx)(j.Z,{data:x,style:{width:"100%",height:"100%"},layout:E,useResizeHandler:!0})},P=[],H={title:{text:"",pad:0},margin:{t:10,l:50,b:30,r:30}},A=function(e){var n,t,a=e.data,i=void 0===a?P:a,u=e.xKey,c=e.domain,s=e.yKey,l=e.getName,f=e.combile,d=(0,Z.useTransition)(),m=(0,o.Z)(d,2),h=(m[0],m[1]),p=(0,Z.useState)(P),v=(0,o.Z)(p,2),x=v[0],g=v[1];(0,Z.useEffect)((function(){h((function(){var e=(0,b.PKp)().range(b.Cn1),n=[];if(f){var t=(0,b.$_Y)("#28a69b");t.opacity=.3;var r="Overall",a={x:[],y:[],name:r,legendgroup:r,type:"scatter",showlegend:!1,fill:"tonexty",fillcolor:t+"",mode:"line",line:{color:"transparent"}};t.opacity=1;var o={x:[],y:[],name:r,legendgroup:r,type:"scatter",mode:"line",line:{color:t+"",width:2}},c=(0,b.Fp7)(i,(function(e){return(0,b.Fp7)(e[1],(function(e){return e.data.length}))})),d=(0,b.w6H)(0,c).map((function(){return[]})),m=(0,b.w6H)(0,c).map((function(){return[]}));n.push(a),n.push(o),i.forEach((function(t){var r=l(t),a={x:[],y:[],name:r,type:"scatter",mode:"line",line:{color:e(r),width:2}};if(t[1]){for(var o=(0,b.Fp7)(t[1],(function(e){return e.data.length})),i=function(e){var n=[],r=t[1].map((function(t){var r=void 0;return void 0!==t.data[e]&&(r=t.data[e][s],n.push(t.data[e][u]),d[e].push(t.data[e][u])),m[e].push(r),r})),o=(0,b.J69)(r),i=(0,b.J69)(n);a.x.push(i),a.y.push(o)},c=0;c<o;c++)i(c);n.push(a)}}));for(var h=0;h<c;h++){var p=(0,b.VV$)(m[h]),v=(0,b.Fp7)(m[h]),x=(0,b.J69)(m[h]),y=(0,b.J69)(d[h]);o.x[h]=y,o.y[h]=x,a.x[h]=y,a.y[h]=v,a.x[2*c-1-h]=y,a.y[2*c-1-h]=p}}else i.forEach((function(t){var r=l(t),a=(0,b.$_Y)(e(r));a.opacity=.5;var o={x:[],y:[],name:r,legendgroup:r,type:"scatter",showlegend:!1,fill:"tozerox",fillcolor:a+"",mode:"line",line:{color:"transparent"}};a.opacity=1;var i=[],c={x:[],y:[],name:r,legendgroup:r,type:"scatter",mode:"line",line:{color:a+"",width:1}};if(t[1]){for(var f=(0,b.Fp7)(t[1],(function(e){return e.data.length})),d=function(e){var n=(0,b.VV$)(t[1],(function(n){return void 0!==n.data[e]?n.data[e][s]:void 0})),r=(0,b.Fp7)(t[1],(function(n){return void 0!==n.data[e]?n.data[e][s]:void 0})),a=(0,b.J69)(t[1],(function(n){return void 0!==n.data[e]?n.data[e][s]:void 0})),l=(0,b.J69)(t[1],(function(n){return void 0!==n.data[e]?n.data[e][u]:void 0}));o.x.push(l),o.y.push(r),i.push(n),c.x.push(l),c.y.push(a)},m=0;m<f;m++)d(m);for(var h=f-1;h>-1;h--)o.x.push(o.x[h]),o.y.push(i[h]);n.push(o),n.push(c)}}));g(n)}))}),[u,s,i,f]);var y=(0,r.Z)((0,r.Z)({},H),{},{yaxis:{title:c[s]?"<b>".concat(null!==(n=c[s].label)&&void 0!==n?n:s,"</b>"):"",autorange:!1,range:c[s]},xaxis:{title:c[s]?"<b>".concat(null!==(t=c[u].label)&&void 0!==t?t:u,"</b>"):""}});return(0,w.jsx)(j.Z,{data:x,style:{width:"100%",height:"100%"},layout:y,useResizeHandler:!0})},R=[],C={title:{text:"",pad:0},margin:{t:10,l:50,b:30,r:30}},_=function(e){var n,t,a=e.data,i=void 0===a?R:a,u=e.xKey,c=e.domain,s=e.yKey,l=e.saveName,f=e.resample,d=void 0===f?"rolling":f,m=e.normalize,h=void 0!==m&&m,p=e.getName,v=(0,Z.useTransition)(),x=(0,o.Z)(v,2),g=(x[0],x[1]),y=(0,Z.useState)(R),E=(0,o.Z)(y,2),S=E[0],z=E[1],K="rolling"===d?function(e,n,t){for(var r=function(){var r=e.slice(Math.max(0,a-n+1),a+1),o=[],i=[];r.forEach((function(e){e[0].forEach((function(e){return o.push(e)})),e[1].forEach((function(e){return i.push(e)}))}));var u=(0,b.J69)(o),c=(0,b.J69)(i);t.x.push(u),t.y.push(c)},a=0;a<e.length;a++)r()}:function(e,n,t){(0,k.chunk)(e,n).forEach((function(e){var n=[],r=[];e.forEach((function(e){e[0].forEach((function(e){return n.push(e)})),e[1].forEach((function(e){return r.push(e)}))}));var a=(0,b.J69)(n),o=(0,b.J69)(r);t.x.push(a),t.y.push(o)}))};(0,Z.useEffect)((function(){g((function(){var e=(0,b.PKp)().range(b.Cn1),n=[];i.forEach((function(t,r){var a=p(t),o={x:[],y:[],name:a,type:"scatter",mode:"lines+markers",line:{color:e(a),width:2},marker:{symbol:r,size:12}};if(t[1]){for(var i=(0,b.Fp7)(t[1],(function(e){return e.data.length})),c=(0,b.w6H)(0,i).map((function(){return[[],[]]})),l=function(e){t[1].forEach((function(n){var t=void 0;return void 0!==n.data[e]&&(t=+n.data[e][s],c[e][0].push(+n.data[e][u])),c[e][1].push(t),t}))},f=0;f<i;f++)l(f);if(K(c,Math.max(1,i/100),o),h){var d=(0,b.BYU)().domain((0,b.Wem)(o.x));o.x=o.x.map((function(e){return d(e)}))}n.push(o)}})),z(n)}))}),[u,s,i,d,h]);var M=c[s],N=(0,r.Z)((0,r.Z)({},C),{},{yaxis:{title:c[s]?"<b>".concat(null!==(n=c[s].label)&&void 0!==n?n:s,"</b>"):"",autorange:!1,range:(0,b.BYU)().domain([M[0],M[1]+.001*(M[1]-M[0])]).nice().domain()},xaxis:{title:c[s]?"<b>".concat(null!==(t=c[u].label)&&void 0!==t?t:u).concat(h?" (normalize)":"","</b>"):""}});return(0,w.jsx)(j.Z,{data:S,style:{width:"100%",height:"100%"},layout:N,config:{displaylogo:!1,toImageButtonOptions:{format:"png",filename:"".concat(null!==l&&void 0!==l?l:"dashboard"),height:300,width:900,scale:1},showEditInChartStudio:!0,plotlyServerURL:"https://chart-studio.plotly.com","#Station":!1},useResizeHandler:!0})},F=[],T={title:{text:"",pad:0},margin:{t:10,l:50,b:20,r:10}},U=function(e){var n=e.data,t=void 0===n?F:n,a=e.getArr,i=e.getName,u=e.xKey,c=e.yKey,s=e.zKey,l=(e.mode,(0,Z.useState)(F)),f=(0,o.Z)(l,2),d=f[0],m=f[1];(0,Z.useEffect)((function(){var e=t.map((function(e){var n=[],t=[],r=[];return a(e).forEach((function(e){n.push(e[u]),t.push(e[c]),r.push(e[s])})),{name:i(e),x:n,y:t,z:r}}));m(e)}),[u,c,s,t]);var h=(0,Z.useMemo)((function(){return d.map((function(e){return(0,r.Z)((0,r.Z)({},e),{},{type:"scatter3d",colorscale:"Portland",mode:"markers",marker:{size:3}})}))}),[d]);return(0,w.jsx)(j.Z,{data:h,style:{width:"100%",height:"100%"},layout:(0,r.Z)((0,r.Z)({},T),{},{scene:{xaxis:{title:{text:u}},yaxis:{title:{text:c}},zaxis:{title:{text:s}}}}),useResizeHandler:!0})},V=[],$={title:{text:"",pad:0},margin:{t:10,l:50,b:50,r:10},hovermode:"closest",dragmode:"select",plot_bgcolor:"rgba(240,240,240, 0.95)",grid:{roworder:"bottom to top"}},q=function(e){var n=e.data,t=void 0===n?V:n,a=e.getArr,i=e.getName,u=e.dimensionKeys,c=(e.mode,(0,Z.useState)(V)),s=(0,o.Z)(c,2),l=s[0],f=s[1],d=(0,Z.useState)($),m=(0,o.Z)(d,2),h=m[0],p=m[1];(0,Z.useEffect)((function(){var e=t.map((function(e){var n=u.map((function(e){return{label:e,values:[]}}));return a(e).forEach((function(e){n.forEach((function(n){n.values.push(e[n.label])}))})),{type:"splom",name:i(e),dimensions:n,marker:{size:5,line:{color:"white",width:.5}}}}));f(e)}),[u,t]),(0,Z.useEffect)((function(){var e=(0,r.Z)({},$);u.forEach((function(n,t){e["xaxis".concat(t)]=v(),e["yaxis".concat(t)]=v()})),p(e)}),[u]);var v=function(){return{showline:!1,zeroline:!1,gridcolor:"#ffff",ticklen:4}};return(0,w.jsx)(j.Z,{data:l,style:{width:"100%",height:"100%"},layout:h,useResizeHandler:!0})},J=function(){function e(e){return n(e).map((function(n){return b.Smz(n)/e.length}))}function n(e){return b.w6H(e[0].length).map((function(n){return e.map((function(e){return e[n]}))}))}function t(e,t){return e.map((function(e){return n(t).map((function(n){return b.Smz(b.$Re(e,n).map((function(e){return e[0]*e[1]})))}))}))}function r(e,n){return b.w6H(e).map((function(e){return b.w6H(n).map((function(){return 0}))}))}function a(e,n){return console.assert(e.length===n.length,"dim(x) == dim(y)"),b.$Re(e,n).map((function(e){return"number"===typeof e[0]?e[0]-e[1]:b.$Re(e[0],e[1]).map((function(e){return e[0]-e[1]}))}))}this.scale=function(n,t,r){if(t){var o=e(n);n=n.map((function(e){return a(e,o)}))}if(r){var i=function(n){e(n);return t=e(function(e,n){return b.$Re(e,n).map((function(e){return"number"===typeof e[0]?e[0]*e[1]:b.$Re(e[0],e[1]).map((function(e){return e[0]*e[1]}))}))}(n,n)),t.map((function(e){return Math.sqrt(e)}));var t}(n);n=n.map((function(e){return n=e,t=i,console.assert(n.length===t.length,"dim(x) == dim(y)"),b.$Re(n,t).map((function(e){return 0!==e[1]?e[0]/e[1]:0}));var n,t}))}return n},this.pca=function(e,n){var o=function(e){var n,t=Math.pow(2,-52),a=1e-64/t,o=50,i=0,u=0,c=0,s=0,l=0,f=e.map((function(e){return e.slice(0)})),d=f.length,m=f[0].length;console.assert(d>=m,"Need more rows than columns");var h=b.w6H(m).map((function(){return 0})),p=b.w6H(m).map((function(){return 0})),v=r(m,m);function x(e,n){return(e=Math.abs(e))>(n=Math.abs(n))?e*Math.sqrt(1+n*n/e/e):0===n?e:n*Math.sqrt(1+e*e/n/n)}var g=0,y=0,Z=0,j=0,k=0,w=0,E=0;for(u=0;u<m;u++){for(h[u]=y,E=0,l=u+1,c=u;c<d;c++)E+=f[c][u]*f[c][u];if(E<=a)y=0;else for(g=f[u][u],y=Math.sqrt(E),g>=0&&(y=-y),Z=g*y-E,f[u][u]=g-y,c=l;c<m;c++){for(E=0,s=u;s<d;s++)E+=f[s][u]*f[s][c];for(g=E/Z,s=u;s<d;s++)f[s][c]+=g*f[s][u]}for(p[u]=y,E=0,c=l;c<m;c++)E+=f[u][c]*f[u][c];if(E<=a)y=0;else{for(g=f[u][u+1],y=Math.sqrt(E),g>=0&&(y=-y),Z=g*y-E,f[u][u+1]=g-y,c=l;c<m;c++)h[c]=f[u][c]/Z;for(c=l;c<d;c++){for(E=0,s=l;s<m;s++)E+=f[c][s]*f[u][s];for(s=l;s<m;s++)f[c][s]+=E*h[s]}}(k=Math.abs(p[u])+Math.abs(h[u]))>j&&(j=k)}for(u=m-1;-1!==u;u+=-1){if(0!==y){for(Z=y*f[u][u+1],c=l;c<m;c++)v[c][u]=f[u][c]/Z;for(c=l;c<m;c++){for(E=0,s=l;s<m;s++)E+=f[u][s]*v[s][c];for(s=l;s<m;s++)v[s][c]+=E*v[s][u]}}for(c=l;c<m;c++)v[u][c]=0,v[c][u]=0;v[u][u]=1,y=h[u],l=u}for(u=m-1;-1!==u;u+=-1){for(l=u+1,y=p[u],c=l;c<m;c++)f[u][c]=0;if(0!==y){for(Z=f[u][u]*y,c=l;c<m;c++){for(E=0,s=l;s<d;s++)E+=f[s][u]*f[s][c];for(g=E/Z,s=u;s<d;s++)f[s][c]+=g*f[s][u]}for(c=u;c<d;c++)f[c][u]=f[c][u]/y}else for(c=u;c<d;c++)f[c][u]=0;f[u][u]+=1}for(t*=j,s=m-1;-1!==s;s+=-1)for(var S=0;S<o;S++){var z=!1;for(l=s;-1!==l;l+=-1){if(Math.abs(h[l])<=t){z=!0;break}if(Math.abs(p[l-1])<=t)break}if(!z){i=0,E=1;var K=l-1;for(u=l;u<s+1&&(g=E*h[u],h[u]=i*h[u],!(Math.abs(g)<=t));u++)for(Z=x(g,y=p[u]),p[u]=Z,i=y/Z,E=-g/Z,c=0;c<d;c++)k=f[c][K],w=f[c][u],f[c][K]=k*i+w*E,f[c][u]=-k*E+w*i}if(w=p[s],l===s){if(w<0)for(p[s]=-w,c=0;c<m;c++)v[c][s]=-v[c][s];break}for(console.assert(S<o-1,"Error: no convergence."),j=p[l],y=x(g=(((k=p[s-1])-w)*(k+w)+((y=h[s-1])-(Z=h[s]))*(y+Z))/(2*Z*k),1),g=g<0?((j-w)*(j+w)+Z*(k/(g-y)-Z))/j:((j-w)*(j+w)+Z*(k/(g+y)-Z))/j,i=1,E=1,u=l+1;u<s+1;u++){for(y=h[u],k=p[u],Z=E*y,y*=i,w=x(g,Z),h[u-1]=w,g=j*(i=g/w)+y*(E=Z/w),y=-j*E+y*i,Z=k*E,k*=i,c=0;c<m;c++)j=v[c][u-1],w=v[c][u],v[c][u-1]=j*i+w*E,v[c][u]=-j*E+w*i;for(w=x(g,Z),p[u-1]=w,g=(i=g/w)*y+(E=Z/w)*k,j=-E*y+i*k,c=0;c<d;c++)k=f[c][u-1],w=f[c][u],f[c][u-1]=k*i+w*E,f[c][u]=-k*E+w*i}h[l]=0,h[s]=g,p[s]=j}for(u=0;u<p.length;u++)p[u]<t&&(p[u]=0);for(u=0;u<m;u++)for(c=u-1;c>=0;c--)if(p[c]<p[u]){for(i=p[c],p[c]=p[u],p[u]=i,s=0;s<f.length;s++)n=f[s][u],f[s][u]=f[s][c],f[s][c]=n;for(s=0;s<v.length;s++)n=v[s][u],v[s][u]=v[s][c],v[s][c]=n;u=c}return{U:f,S:p,V:v}}(e),i=o.U,u=function(e){return b.w6H(e.length).map((function(n){return b.w6H(e.length).map((function(t){return n===t?e[n]:0}))}))}(o.S),c=o.V,s=t(e,c),l=t(i,u),f=function(e,n){return e.map((function(e){return e.map((function(e){return e<n?0:e}))}))}(a(s,l),1e-12),d=r(f.length,f[0].length);console.assert(function(e,n){return b.$Re(e,n).map((function(e){return b.$Re(e[0],e[1]).map((function(e){return e[0]===e[1]}))})).map((function(e){return e.reduce((function(e,n){return e*n}))})).reduce((function(e,n){return e*n}))}(f,d),"svd and eig ways must be the same.");for(var m=[],h=0;h<n;h++)m.push(h);for(var p in o.S)for(h=0;h<n;h++)if(o.S[p]>=o.S[m[h]]){m[h]=parseInt(p);break}return[l,c,m,u]}},W=[],L={title:{text:"",pad:0},margin:{t:10,l:50,b:50,r:10}},B=2,Y=function(e){var n=e.data,t=void 0===n?W:n,a=e.domain,i=e.getArr,u=e.getName,c=e.dimensionKeys,s=(e.mode,(0,Z.useState)(W)),l=(0,o.Z)(s,2),f=l[0],d=l[1],m=(0,Z.useState)(L),h=(0,o.Z)(m,2),p=h[0],v=h[1],x=(0,Z.useTransition)(),g=(0,o.Z)(x,2),y=(g[0],g[1]);return(0,Z.useEffect)((function(){y((function(){try{var e={},n=!1;if(c.forEach((function(t){a[t]?e[t]=(0,b.BYU)().domain([a[t][0],a[t][1]]):n=!0})),n)return;var s=[],l=[];t.forEach((function(n,t){l[t]=[],i(n).forEach((function(n){var r=c.map((function(t){return e[t](+n[t])}));l[t].push(s.length),s.push(r)}))}));var f=function(e,n){var t=new J,r=t.scale(e,!0,!1),a=t.pca(r,B),i=a[0],u=a[1],c=a[2],s=a[3],l=e.map((function(e,n){var t=(0,b.w6H)(0,B).map((function(e){return i[n][c[e]]}));return t.data=e,t})),f=(0,b.Wem)(l,(function(e){return e[0]})),d=(0,b.Wem)(l,(function(e){return e[1]})),m=(0,b.Smz)(s,(function(e,n){return e[n]})),h=(0,b.w6H)(0,B).map((function(e){return s[c[e]][c[e]]/m})),p=[0,0],v=[[0,-1/0],[0,-1/0]],x=n.map((function(e,n){var t=[p,(0,b.w6H)(0,B).map((function(e){return u[n][c[e]]}))];return v.forEach((function(e,r){var a=(0,o.Z)(e,2),i=(a[0],a[1]),u=Math.abs(t[1][r]-t[0][r]);u>i&&(v[r]=[n,u])})),t.name=e,t}));x[v[0][0]].pc1=!0,x[v[1][0]].pc2=!0;var g=Math.sqrt((0,b.Fp7)([O(p,[f[0],d[0]]),O(p,[f[0],d[1]]),O(p,[f[1],d[0]]),O(p,[f[1],d[1]])])/(0,b.Fp7)(x,(function(e){return O(p,[e[1][0],e[1][1]])})));return x.forEach((function(e){e[1][0]=e[1][0]*g,e[1][1]=e[1][1]*g})),{solution:l,feature:x,contribute:h}}(s,c),m=f.solution,h=f.feature,p=f.contribute,x=t.map((function(e,n){return{type:"scatters",mode:"markers",name:u(e),x:l[n].map((function(e){return m[e][0]})),y:l[n].map((function(e){return m[e][1]}))}}));d(x);var g=(0,r.Z)((0,r.Z)({},L),{},{xaxis:{title:{text:"PC1 (".concat(Math.round(1e3*p[0])/10,"%)")},constrain:"domain"},yaxis:{title:{text:"PC2 (".concat(Math.round(1e3*p[1])/10,"%)")},scaleanchor:"x"}});g.shapes=h.map((function(e){return{type:"line",x0:e[0][0],y0:e[0][1],x1:e[1][0],y1:e[1][1]}})),g.annotations=h.map((function(e){return{x:e[1][0],y:e[1][1],text:e.name,xanchor:"center",yanchor:"bottom",font:{color:e.pc1||e.pc2?"red":"unset"}}})),v(g)}catch(y){d([])}}))}),[c,t,a]),(0,w.jsx)(j.Z,{data:f,style:{width:"100%",height:"100%"},layout:p,useResizeHandler:!0})};function O(e,n){return Math.sqrt((e[1]-n[1])*(e[1]-n[1])+(e[0]-n[0])*(e[0]-n[0]))}var D=[],I={title:{text:"",pad:0},margin:{t:10,l:50,b:50,r:10}},G=2,X=function(e){var n=e.data,t=void 0===n?D:n,a=e.getArr,i=e.getName,u=e.dimensionKeys,c=e.domain,s=(e.mode,(0,Z.useState)(D)),l=(0,o.Z)(s,2),f=l[0],d=l[1],m=(0,Z.useState)(I),h=(0,o.Z)(m,2),p=h[0],v=h[1],x=(0,Z.useTransition)(),g=(0,o.Z)(x,2),y=(g[0],g[1]);return(0,Z.useEffect)((function(){y((function(){try{var e={},n=!1;if(u.forEach((function(t){c[t]?e[t]=(0,b.BYU)().domain([c[t][0],c[t][1]]):n=!0})),n)return;var s=t.map((function(e){return i(e)})),l=(0,b.VV$)(t,(function(e){return a(e).length})),f=[];t.forEach((function(n,t){for(var r=a(n),o=function(){var n=r[i],t=u.map((function(t){return e[t](+n[t])}));f.push(t)},i=0;i<l;i++)o()}));var m=function(e,n,t,r){for(var a=new J,i=a.scale(e,!0,!0),u=[],c=function(e){for(var n=function(n){u[e*r+n]=t.map((function(t,a){return i[a*r+n][e]}))},a=0;a<r;a++)n(a)},s=0;s<n.length;s++)c(s);var l=a.pca(u,G),f=l[0],d=l[1],m=l[2],h=l[3];console.log(d);var p=u.map((function(e,n){return(0,b.w6H)(0,G).map((function(e){return f[n][m[e]]}))})),v=(0,b.Wem)(p,(function(e){return e[0]})),x=(0,b.Wem)(p,(function(e){return e[1]})),g=[0,0],y=[[0,-1/0],[0,-1/0]],Z=t.map((function(e,n){var t=[g,(0,b.w6H)(0,G).map((function(e){return d[n][m[e]]}))];return y.forEach((function(e,r){var a=(0,o.Z)(e,2),i=(a[0],a[1]),u=Math.abs(t[1][r]-t[0][r]);u>i&&(y[r]=[n,u])})),t.name=e,t}));Z[y[0][0]].pc1=!0,Z[y[1][0]].pc2=!0;var j=Math.sqrt((0,b.Fp7)([Q(g,[v[0],x[0]]),Q(g,[v[0],x[1]]),Q(g,[v[1],x[0]]),Q(g,[v[1],x[1]])])/(0,b.Fp7)(Z,(function(e){return Q(g,[e[1][0],e[1][1]])})));Z.forEach((function(e){e[1][0]=e[1][0]*j,e[1][1]=e[1][1]*j}));var k=(0,b.Smz)(h,(function(e,n){return e[n]}));var w=(0,b.w6H)(0,G).map((function(e){return h[m[e]][m[e]]/k}));return{solution:p,feature:Z,contribute:w}}(f,u,s,l),h=m.solution,p=m.feature,x=m.contribute,g=(0,b.w6H)(0,l),y=u.map((function(e,n){return{type:"scatters",mode:"markers",name:e,x:g.map((function(e){return h[n*l+e][0]})),y:g.map((function(e){return h[n*l+e][1]}))}}));d(y);var Z=(0,r.Z)((0,r.Z)({},I),{},{xaxis:{title:{text:"PC1 (".concat(Math.round(1e3*x[0])/10,"%)")},constrain:"domain"},yaxis:{title:{text:"PC2 (".concat(Math.round(1e3*x[1])/10,"%)")},scaleanchor:"x"}});Z.shapes=p.map((function(e){return{type:"line",x0:e[0][0],y0:e[0][1],x1:e[1][0],y1:e[1][1]}})),Z.annotations=p.map((function(e){return{x:e[1][0],y:e[1][1],text:e.name,xanchor:"center",yanchor:"bottom",font:{color:e.pc1||e.pc2?"red":"unset"}}})),v(Z)}catch(j){d([])}}))}),[u,t,c]),(0,w.jsx)(j.Z,{data:f,style:{width:"100%",height:"100%"},layout:p,useResizeHandler:!0})};function Q(e,n){return Math.sqrt((e[1]-n[1])*(e[1]-n[1])+(e[0]-n[0])*(e[0]-n[0]))}var ee=[],ne={title:{text:"",pad:0},margin:{t:10,r:10},xaxis:{ticks:"",tickfont:{size:8}},yaxis:{ticks:"",ticksuffix:" ",tickfont:{size:8}}},te=function(e){var n=e.data,t=void 0===n?ee:n,a=e.getArr,i=e.getName,u=e.dimensionKey,c=(0,Z.useState)(ee),s=(0,o.Z)(c,2),l=s[0],f=s[1],d=(0,Z.useState)(ne),m=(0,o.Z)(d,2),h=m[0],p=m[1],v=(0,Z.useTransition)(),x=(0,o.Z)(v,2),g=(x[0],x[1]);return(0,Z.useEffect)((function(){g((function(){try{var e=[],n=t.map((function(n,t){return e.push(i(n)),a(n).map((function(e){return+e[u]}))})),o=[],c=e.map((function(n){return e.map((function(e){return null}))}));c[e.length-1][e.length-1]=1;for(var s=0;s<e.length-1;s++){c[s][s]=1;for(var l=s+1;l<e.length;l++){var d=n[s].length<n[l].length?re(n[s],n[l]):re(n[l],n[s]);c[s][l]=Math.abs(d),c[l][s]=c[s][l],c[s][l],o.push({xref:"x1",yref:"y1",x:e[l],y:e[s],text:Math.round(100*d)/100,font:{color:"white"},showarrow:!1})}}f([{type:"heatmap",name:u,x:e,y:e,z:c,zauto:!1,zmin:0,zmax:1,hoverongaps:!1,showscale:!1}]);var m=(0,r.Z)((0,r.Z)({},ne),{},{annotations:o});p(m)}catch(h){f([])}}))}),[u,t]),(0,w.jsx)(j.Z,{data:l,style:{width:"100%",height:"100%"},layout:h,useResizeHandler:!0})};function re(e,n){var t=Math.min,r=Math.pow,a=Math.sqrt,i=function(e,n){return e+n},u=t(e.length,n.length);if(0===u)return 0;var c=[e.slice(0,u),n.slice(0,u)],s=[e=c[0],n=c[1]].map((function(e){return e.reduce(i)})),l=(0,o.Z)(s,2),f=l[0],d=l[1],m=[e,n].map((function(e){return e.reduce((function(e,n){return e+r(n,2)}),0)})),h=(0,o.Z)(m,2),p=h[0],v=h[1],x=e.map((function(e,t){return e*n[t]})).reduce(i),g=a((p-r(f,2)/u)*(v-r(d,2)/u));return 0===g?0:(x-f*d/u)/g}var ae=[],oe={title:{text:"",pad:0},margin:{t:10,l:50,b:20,r:30},height:150,violinmode:"group",boxmode:"group"},ie=function(e){var n=e.data,t=void 0===n?ae:n,a=(e.getArr,e.getName),i=e.dimensionKeys,u=e.domain,c=e.mode,s=void 0===c?"violin":c,l=(0,Z.useTransition)(),f=(0,o.Z)(l,2),d=(f[0],f[1]),m=(0,Z.useState)(ae),h=(0,o.Z)(m,2),p=h[0],v=h[1],x=(0,Z.useState)([]),g=(0,o.Z)(x,2),y=g[0],k=g[1];(0,Z.useEffect)((function(){d((function(){var e=[],n={};i.forEach((function(e){n[e]=[]})),k([(0,b.VV$)(i,(function(e){return u[e][0]})),(0,b.Fp7)(i,(function(e){return u[e][1]}))]),t.map((function(t){var r=a(t);t[1].forEach((function(t){t.data.forEach((function(t){e.push(r),i.forEach((function(e,r){n[e].push(t[e])}))}))}))}));var r=i.map((function(t){return{type:s,x:e,y:n[t],legendgroup:t,scalegroup:t,name:t,points:"none",box:{visible:!0},meanline:{visible:!0}}}));v(r)}))}),[t,i,s]);var E=(0,r.Z)((0,r.Z)({},oe),{},{yaxis:{autoscale:!1,range:(0,b.BYU)().domain(y).nice()}});return console.log(y,(0,b.BYU)().domain(y).nice().domain()),(0,w.jsx)(j.Z,{className:"violin_".concat(s),data:p,style:{width:"100%",height:"100%"},layout:E,useResizeHandler:!0})},ue={power_usage:"Power Usage (W)",index:"Sample",voltage:"Voltage (mV)",edge_temperature:"Edge Temp ('C)",memory_temperature:"Mem Temp ('C)",juntion_temperature:"Junction Temp ('C)",sclk:"GPU Frequency (MHz)",gpu_usage:"GPU Usage (%)",memory_usage:"Mem Usage (%)"},ce=function(){var e=(0,i.v9)(u.hp),n=(0,Z.useState)(!1),t=(0,o.Z)(n,2),j=t[0],k=t[1],E=(0,Z.useState)([]),S=(0,o.Z)(E,2),K=S[0],M=S[1],P=(0,Z.useState)([]),H=(0,o.Z)(P,2),R=H[0],C=H[1],F=(0,Z.useState)({}),T=(0,o.Z)(F,2),V=T[0],$=T[1],J=(0,Z.useState)("lines"),W=(0,o.Z)(J,2),L=W[0],B=W[1],O=(0,Z.useState)([{label:"x",key:"index"},{label:"y",key:"voltage"},{label:"z",key:null,is3D:!0},{label:"color",key:null},{label:"dim",key:[],is3D:!0}]),D=(0,o.Z)(O,2),I=D[0],G=D[1],Q=(0,Z.useState)("rolling"),ee=(0,o.Z)(Q,2),ne=ee[0],re=ee[1],ae=(0,Z.useState)(!1),oe=(0,o.Z)(ae,2),ce=oe[0],se=oe[1],le=(0,Z.useRef)(),fe=j?"Profile":"AppName",de=j?"AppName":"Profile";(0,Z.useEffect)((function(){var n=function(e,n){var t=(0,b.Xxj)(n,(function(e){return e[fe]})),r={},a=[],i=t.map((function(e){var n=(0,o.Z)(e,2),t=n[0],i=n[1],u=Object.keys(r).map((function(e){return[e,[]]}));return i.forEach((function(e){void 0===r[e[de]]&&(r[e[de]]=u.length,u[r[e[de]]]=[e[de],[]]),u[r[e[de]]][1].push(e),a.push(e.data)})),[t,u]}));return M(i),{flatdata:a}}(0,e),t=n.flatdata,r={};if(e[0]&&e[0].data&&e[0].data[0]){var a=Object.keys(e[0].data[0]);a.forEach((function(e){r[e]=[1/0,-1/0];var n=t.map((function(n){return(0,b.Wem)(n,(function(n){return+n[e]}))}));r[e]=[(0,b.VV$)(n,(function(e){return e[0]})),(0,b.Fp7)(n,(function(e){return e[1]}))],ue[e]&&(r[e].label=ue[e])})),C(a)}else C([]);$(r)}),[j,e]);var me=function(e,n){I[e].key=n,G((0,a.Z)(I))},he="markers"===L||"lines2"===L||"violin"===L||"errorbar"===L||"errorbar2"===L||"aggregate"===L||"lines"===L||"Splom"===L,pe=function(e){var n=(0,o.Z)(e,2),t=n[0],r=n[1];switch(L){case"markers":case"lines":return(0,w.jsx)(h.ZP,{container:!0,children:r.map((function(e,n){var r,a=(0,o.Z)(e,2),i=a[0],u=a[1];return(0,w.jsxs)(h.ZP,{item:!0,xs:4,sx:{height:200,mb:3,paddingTop:2},children:[(0,w.jsx)(p.Z,{variant:"h5",textAlign:"center",children:i}),u[0]&&(0,w.jsx)(z,{data:null===(r=u[0])||void 0===r?void 0:r.data,xKey:I[0].key,yKey:I[1].key,domain:V,cKey:I[3].key,colorDomain:V[I[3].key],getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},mode:L,showscale:2===n})]},"".concat(t," ").concat(i))}))});case"errorbar":return(0,w.jsx)(h.ZP,{container:!0,children:(0,w.jsx)(A,{data:r,xKey:I[0].key,yKey:I[1].key,domain:V,getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t}})});case"errorbar2":return(0,w.jsx)(h.ZP,{container:!0,children:(0,w.jsx)(A,{data:r,xKey:I[0].key,yKey:I[1].key,domain:V,getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},combile:!0})});case"aggregate":return(0,w.jsx)(h.ZP,{container:!0,children:(0,w.jsx)(_,{data:r,xKey:I[0].key,yKey:I[1].key,domain:V,getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},combile:!0,resample:ne,normalize:ce,saveName:t})});case"lines2":return(0,w.jsx)(h.ZP,{container:!0,children:I[4].key.map((function(e){return(0,w.jsx)(h.ZP,{item:!0,xs:I[4].key.length>1?4:12,children:(0,w.jsx)(N,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,xKey:"index",yKey:e,domain:V})},e)}))});case"violin":return(0,w.jsx)(ie,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},domain:V,data:r,mode:"violin",dimensionKeys:I[4].key});case"boxplot":return(0,w.jsx)(ie,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},domain:V,data:r,mode:"box",dimensionKeys:I[4].key});case"Splom":return(0,w.jsx)(q,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,dimensionKeys:I[4].key});case"pca":return(0,w.jsx)(Y,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,domain:V,dimensionKeys:I[4].key});case"pca_2":return(0,w.jsx)(X,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,domain:V,dimensionKeys:I[4].key});case"sim":return(0,w.jsx)(h.ZP,{container:!0,children:I[4].key.map((function(e){return(0,w.jsxs)(h.ZP,{item:!0,xs:I[4].key.length>1?6:12,sx:{height:200,mb:3},children:[(0,w.jsx)(p.Z,{variant:"h5",textAlign:"center",children:e}),(0,w.jsx)(te,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,dimensionKey:e})]},e)}))});case"Ribbon":return(0,w.jsx)(U,{getArr:function(e){var n=(0,o.Z)(e,2),t=(n[0],n[1]);return t[0]?t[0].data:[]},getName:function(e){var n=(0,o.Z)(e,2),t=n[0];n[1];return t},data:r,xKey:I[0].key,yKey:I[1].key,zKey:I[2].key,cKey:I[3].key});default:return(0,w.jsx)(w.Fragment,{children:"Not support yet"})}};return(0,w.jsxs)(h.ZP,{container:!0,spacing:c.dv,children:[(0,w.jsx)(h.ZP,{item:!0,xs:12,children:(0,w.jsxs)(v.Z,{spacing:2,direction:"row",ref:le,children:[(0,w.jsxs)(l.Z,{select:!0,label:"Plot type",size:"small",sx:{minWidth:200},value:L,onChange:function(e){return B(e.target.value)},children:[(0,w.jsx)(f.Z,{value:"markers",children:"Scatter plot"}),(0,w.jsx)(f.Z,{value:"lines",children:"Line chart"}),(0,w.jsx)(f.Z,{value:"errorbar",children:"Line chart with bound"}),(0,w.jsx)(f.Z,{value:"errorbar2",children:"Line chart with bound 2"}),(0,w.jsx)(f.Z,{value:"aggregate",children:"Line chart with aggregate"}),(0,w.jsx)(f.Z,{value:"lines2",children:"Line chart (combine)"}),(0,w.jsx)(f.Z,{value:"violin",children:"Violin chart (combine)"}),(0,w.jsx)(f.Z,{value:"boxplot",children:"Box plot (combine)"}),(0,w.jsx)(f.Z,{value:"Ribbon",children:"3D scatter plot"}),(0,w.jsx)(f.Z,{value:"Splom",children:"Splom"}),(0,w.jsx)(f.Z,{value:"pca",children:"PCA"}),(0,w.jsx)(f.Z,{value:"pca_2",children:"PCA 2"}),(0,w.jsx)(f.Z,{value:"sim",children:"Similarity matrix"})]}),(0,w.jsx)(x.Z,{value:"app_profile",selected:j,color:"primary",onChange:function(){return k(!j)},children:"Swap App and Profile"}),function(){switch(L){case"markers":case"errorbar":case"errorbar2":case"lines":return I.map((function(e,n){return(0,w.jsx)(s.Z,{value:e.key,getOptionLabel:function(e){return e},size:"small",sx:{minWidth:200,display:e.is3D?"none":void 0},options:R,onChange:function(e,t){return me(n,t)},renderInput:function(n){return(0,w.jsx)(l.Z,(0,r.Z)((0,r.Z)({},n),{},{label:e.label}))}},e.label)}));case"aggregate":return(0,w.jsxs)(w.Fragment,{children:[[I[0],I[1]].map((function(e,n){return(0,w.jsx)(s.Z,{value:e.key,getOptionLabel:function(e){return e},size:"small",sx:{minWidth:200,display:e.is3D?"none":void 0},options:R,onChange:function(e,t){return me(n,t)},renderInput:function(n){return(0,w.jsx)(l.Z,(0,r.Z)((0,r.Z)({},n),{},{label:e.label}))}},e.label)})),(0,w.jsxs)(l.Z,{select:!0,label:"Aggregate",value:ne,size:"small",onChange:function(e){return re(e.target.value)},children:[(0,w.jsx)(f.Z,{value:"rolling",children:"Moving window"}),(0,w.jsx)(f.Z,{value:"resample",children:"Resampling"})]},"Aggregate"),(0,w.jsx)(d.Z,{value:ce,onChange:function(e){return se(e.target.checked)},control:(0,w.jsx)(m.Z,{}),label:"Normalize ".concat(I[0].key),labelPlacement:"end"},"Aggregate_Normalize")]});case"violin":case"boxplot":case"Splom":case"pca":case"pca_2":case"sim":case"lines2":return(0,w.jsx)(s.Z,{value:I[4].key,multiple:!0,getOptionLabel:function(e){return e},size:"small",options:R,onChange:function(e,n){return me(4,n)},renderInput:function(e){return(0,w.jsx)(l.Z,(0,r.Z)((0,r.Z)({},e),{},{label:I[4].label}))}});default:return I.map((function(e,n){return(0,w.jsx)(s.Z,{value:e.key,size:"small",getOptionLabel:function(e){return e},sx:{minWidth:200,display:"color"===e.label?"none":void 0},options:R,onChange:function(e,t){return me(n,t)},renderInput:function(n){return(0,w.jsx)(l.Z,(0,r.Z)((0,r.Z)({},n),{},{label:e.label}))}},e.label)}))}}()]})}),K.map((function(e){var n=(0,o.Z)(e,2),t=n[0],r=n[1];return(0,w.jsx)(h.ZP,{item:!0,xs:he?12:6,children:(0,w.jsx)(g.Z,{children:(0,w.jsxs)(y.Z,{sx:{p:2,pl:2},children:[(0,w.jsx)(p.Z,{variant:"h4",sx:{textAlign:"center"},children:t}),pe([t,r])]})})},t)}))]})}}}]);
//# sourceMappingURL=46.1b65a90a.chunk.js.map